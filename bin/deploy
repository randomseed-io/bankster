#!/bin/sh

set -eu

case $0 in
  */*) self=$0 ;;
  *)   self=$(command -v -- "$0") || exit 1 ;;
esac

repo_root=$(
  CDPATH= cd -- "$(dirname -- "$self")/.." 2>/dev/null && pwd -P
) || exit 1

cd -- "$repo_root"

. .clojars/login.env

env CLOJARS_USERNAME="${CLOJARS_USERNAME}" CLOJARS_PASSWORD="${CLOJARS_PASSWORD}" clj -T:deploy "$@"
