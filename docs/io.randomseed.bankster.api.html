<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>io.randomseed.bankster.api documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script><link rel="stylesheet" type="text/css" href="css/randomseed.css" /></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Bankster</span> <span class="project-version">2.2.2</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="10_introduction.html"><div class="inner"><span>Introduction</span></div></a></li><li class="depth-1 "><a href="11_sneak-peeks.html"><div class="inner"><span>Sneak peeks</span></div></a></li><li class="depth-1 "><a href="12_api.html"><div class="inner"><span>Bankster Front API</span></div></a></li><li class="depth-1 "><a href="15_contracts.html"><div class="inner"><span>Bankster Contracts</span></div></a></li><li class="depth-1 "><a href="20_data_structures.html"><div class="inner"><span>Data Structures</span></div></a></li><li class="depth-1 "><a href="30_currency-kinds.html"><div class="inner"><span>Currency kinds</span></div></a></li><li class="depth-1 "><a href="32_currency_traits.html"><div class="inner"><span>Currency traits</span></div></a></li><li class="depth-1 "><a href="50_example_config.html"><div class="inner"><span>Example EDN config</span></div></a></li><li class="depth-1 "><a href="50_serialization.html"><div class="inner"><span>Serialization</span></div></a></li><li class="depth-1 "><a href="80_Apache-2-License.html"><div class="inner"><span>Apache License, v2.0</span></div></a></li><li class="depth-1 "><a href="85_LGPL-3-License.html"><div class="inner"><span>LGPL License, v3 or later</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>io</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>randomseed</span></div></div></li><li class="depth-3"><a href="io.randomseed.bankster.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bankster</span></div></a></li><li class="depth-4 current"><a href="io.randomseed.bankster.api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></a></li><li class="depth-5 branch"><a href="io.randomseed.bankster.api.currency.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>currency</span></div></a></li><li class="depth-5 branch"><a href="io.randomseed.bankster.api.money.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>money</span></div></a></li><li class="depth-5 branch"><a href="io.randomseed.bankster.api.ops.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ops</span></div></a></li><li class="depth-5 branch"><a href="io.randomseed.bankster.api.registry.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>registry</span></div></a></li><li class="depth-5"><a href="io.randomseed.bankster.api.v2.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>v2</span></div></a></li><li class="depth-6 branch"><a href="io.randomseed.bankster.api.v2.currency.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>currency</span></div></a></li><li class="depth-6 branch"><a href="io.randomseed.bankster.api.v2.money.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>money</span></div></a></li><li class="depth-6 branch"><a href="io.randomseed.bankster.api.v2.ops.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ops</span></div></a></li><li class="depth-6"><a href="io.randomseed.bankster.api.v2.registry.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>registry</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.bankster.config.html"><div class="inner"><span class="tree" style="top: -300px;"><span class="top" style="height: 309px;"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.bankster.currency.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>currency</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.bankster.init.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>init</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.bankster.jsr-354.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jsr-354</span></div></a></li><li class="depth-4"><a href="io.randomseed.bankster.money.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>money</span></div></a></li><li class="depth-5 branch"><a href="io.randomseed.bankster.money.inter-ops.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>inter-ops</span></div></a></li><li class="depth-5"><a href="io.randomseed.bankster.money.ops.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ops</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.bankster.registry.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>registry</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.bankster.scale.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>scale</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>serializers</span></div></div></li><li class="depth-5 branch"><a href="io.randomseed.bankster.serializers.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-5 branch"><a href="io.randomseed.bankster.serializers.edn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>edn</span></div></a></li><li class="depth-5"><a href="io.randomseed.bankster.serializers.json.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>json</span></div></a></li><li class="depth-4"><a href="io.randomseed.bankster.util.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-5 branch"><a href="io.randomseed.bankster.util.fs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fs</span></div></a></li><li class="depth-5 branch"><a href="io.randomseed.bankster.util.importer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>importer</span></div></a></li><li class="depth-5"><a href="io.randomseed.bankster.util.map.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>map</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="io.randomseed.bankster.api.html#var-amount"><div class="inner"><span>amount</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.api.html#var-auto-scaled.3F"><div class="inner"><span>auto-scaled?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.api.html#var-currency"><div class="inner"><span>currency</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.api.html#var-currency-try"><div class="inner"><span>currency-try</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.api.html#var-default-registry"><div class="inner"><span>default-registry</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.api.html#var-info"><div class="inner"><span>info</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.api.html#var-iso-currency.3F"><div class="inner"><span>iso-currency?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.api.html#var-money"><div class="inner"><span>money</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.api.html#var-money-try"><div class="inner"><span>money-try</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.api.html#var-registry-or-default"><div class="inner"><span>registry-or-default</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.api.html#var-rounding-mode"><div class="inner"><span>rounding-mode</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.api.html#var-scale"><div class="inner"><span>scale</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.api.html#var-scale-apply"><div class="inner"><span>scale-apply</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.api.html#var-with-rescaling"><div class="inner"><span>with-rescaling</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.api.html#var-with-rounding"><div class="inner"><span>with-rounding</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">io.randomseed.bankster.api</h1><h4 class="added">added in 2.2.0</h4><div class="doc"><div class="markdown"><p>Bankster library, front API.</p>
</div></div><div class="public anchor" id="var-amount"><h3>amount</h3><h4 class="added">added in 2.2.0</h4><div class="usage"><code>(amount x)</code><code>(amount x sc)</code><code>(amount x sc rounding)</code></div><div class="doc"><div class="markdown"><p>Returns the amount of a scalable as a <code>BigDecimal</code>.</p>
<p>Delegates to <code>io.randomseed.bankster.scale/amount</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.2/src/io/randomseed/bankster/api.clj#L108">view source</a></div></div><div class="public anchor" id="var-auto-scaled.3F"><h3>auto-scaled?</h3><h4 class="added">added in 2.2.0</h4><div class="usage"><code>(auto-scaled? x)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if a scalable’s derived scale is auto-scaled.</p>
<p>Delegates to <code>io.randomseed.bankster.scale/auto?</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.2/src/io/randomseed/bankster/api.clj#L133">view source</a></div></div><div class="public anchor" id="var-currency"><h3>currency</h3><h4 class="added">added in 2.2.0</h4><div class="usage"><code>(currency)</code><code>(currency currency)</code><code>(currency currency registry)</code></div><div class="doc"><div class="markdown"><p>Strict currency coercion (throwing).</p>
<p>Delegates to <code>io.randomseed.bankster.currency/unit</code>.</p>
<p>Arity: - <code>()</code> uses <code>io.randomseed.bankster.currency/*default*</code>. - <code>([currency])</code> resolves the given currency representation. - <code>([currency registry])</code> resolves using the given registry (<code>nil</code> -&gt; default).</p>
<p>Accepts currency identifiers (keyword/symbol/string/number), <code>Currency</code> values, and currency maps (treated as registry lookup specs).</p>
<p>When a registry is consulted and no match is found, it throws. Returns <code>nil</code> for <code>nil</code> input.</p>
<p>When the input is already a <code>Currency</code> and <code>registry</code> is <code>nil</code>, or omitted, it is returned as-is.</p>
<p>When the input is a <code>Currency</code> but registry is explicitly given and not <code>nil</code>, the given currency will be used to perform a registry lookup (and its properties will be used as a mask).</p>
<p>Setting registry to <code>true</code> will cause a default registry to be used and lookup enforced.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.2/src/io/randomseed/bankster/api.clj#L174">view source</a></div></div><div class="public anchor" id="var-currency-try"><h3>currency-try</h3><h4 class="added">added in 2.2.0</h4><div class="usage"><code>(currency-try)</code><code>(currency-try currency)</code><code>(currency-try currency registry)</code></div><div class="doc"><div class="markdown"><p>Non-throwing currency resolution (soft).</p>
<p>Delegates to <code>io.randomseed.bankster.currency/unit-try</code> and returns a registered <code>Currency</code> or <code>nil</code> when it cannot be resolved.</p>
<p>Arity: - <code>()</code> uses <code>currency/*default*</code>. - <code>([currency])</code> resolves the given representation using the default registry. - <code>([currency registry])</code> resolves using the given registry (<code>nil</code> -&gt; default).</p>
<p>Accepts currency identifiers (keyword/symbol/string/number), <code>Currency</code> values, and currency maps (treated as registry lookup specs).</p>
<p>When a registry is consulted and no match is found, it returns <code>nil</code>.</p>
<p>When the input is already a <code>Currency</code> and <code>registry</code> is <code>nil</code> or omitted, it is returned as-is.</p>
<p>When the input is a <code>Currency</code> but registry is explicitly given and not <code>nil</code>, the given currency will be used to perform a registry lookup (and its properties will be used as a mask).</p>
<p>Setting registry to <code>true</code> will cause a default registry to be used and lookup enforced.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.2/src/io/randomseed/bankster/api.clj#L182">view source</a></div></div><div class="public anchor" id="var-default-registry"><h3>default-registry</h3><h4 class="added">added in 2.2.0</h4><div class="usage"><code>(default-registry)</code></div><div class="doc"><div class="markdown"><p>Returns the default registry (honors <code>registry/*default*</code>).</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.2/src/io/randomseed/bankster/api.clj#L27">view source</a></div></div><div class="public anchor" id="var-info"><h3>info</h3><h4 class="added">added in 2.2.0</h4><div class="usage"><code>(info x)</code><code>(info x registry)</code><code>(info x locale registry)</code></div><div class="doc"><div class="markdown"><p>Returns info map for currency or money.</p>
<ul>
<li>For <code>Money</code> values, delegates to <code>io.randomseed.bankster.money/info</code>.</li>
<li>Otherwise delegates to <code>io.randomseed.bankster.currency/info</code>.</li>
</ul>
<p>Registry arguments are ignored for <code>Money</code>. When <code>registry</code> is <code>true</code>, the default registry is used.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.2/src/io/randomseed/bankster/api.clj#L194">view source</a></div></div><div class="public anchor" id="var-iso-currency.3F"><h3>iso-currency?</h3><h4 class="added">added in 2.2.0</h4><div class="usage"><code>(iso-currency? currency)</code><code>(iso-currency? currency registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> when the given currency is a kind of ISO currency.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.2/src/io/randomseed/bankster/api.clj#L141">view source</a></div></div><div class="public anchor" id="var-money"><h3>money</h3><h4 class="added">added in 2.2.0</h4><div class="usage"><code>(money)</code><code>(money amount)</code><code>(money amount currency)</code><code>(money amount currency rounding)</code><code>(money amount currency registry)</code><code>(money amount currency rounding registry)</code></div><div class="doc"><div class="markdown"><p>First-class Money constructor with amount-first argument order.</p>
<p>Delegates to <code>io.randomseed.bankster.money/value</code> and resolves currency via <code>io.randomseed.bankster.currency/unit</code> when a currency argument is provided.</p>
<p>Arity:</p>
<ul>
<li><code>()</code> creates zero in the default currency.</li>
<li><code>([amount])</code> delegates to unary <code>money/value</code>.</li>
<li><code>([amount currency])</code> uses amount + currency.</li>
<li><code>([amount currency rounding])</code> uses amount + currency + rounding.</li>
<li><code>([amount currency registry])</code> uses amount + currency (resolved using registry).</li>
<li><code>([amount currency rounding registry])</code> explicit rounding + registry for resolution.</li>
</ul>
<p><code>currency</code> may be a <code>Currency</code>, an identifier (keyword/symbol/string/number), or a currency map (lookup spec).</p>
<p>When a registry is consulted and the currency cannot be resolved, it throws.</p>
<p>When registry is <code>true</code>, the default registry (global or dynamically bound) is used.</p>
<p><code>rounding</code> may be a <code>java.math.RoundingMode</code> or a keyword/symbol/string like “HALF_UP” (see <code>scale/post-parse-rounding</code>). If no default currency is configured and the amount does not encode one, <code>money/value</code> will throw.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.2/src/io/randomseed/bankster/api.clj#L153">view source</a></div></div><div class="public anchor" id="var-money-try"><h3>money-try</h3><h4 class="added">added in 2.2.0</h4><div class="usage"><code>(money-try)</code><code>(money-try amount)</code><code>(money-try amount currency)</code><code>(money-try amount currency rounding)</code><code>(money-try amount currency registry)</code><code>(money-try amount currency rounding registry)</code></div><div class="doc"><div class="markdown"><p>Non-throwing variant of <code>resolve</code> for currency resolution.</p>
<p>Uses <code>io.randomseed.bankster.currency/unit-try</code> and returns <code>nil</code> when the currency cannot be resolved in the given (or default) registry. Accepts the same argument shapes as <code>resolve</code>. Rounding is parsed.</p>
<p>When registry is <code>true</code>, the default registry (global or dynamically bound) is used.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.2/src/io/randomseed/bankster/api.clj#L162">view source</a></div></div><div class="public anchor" id="var-registry-or-default"><h3>registry-or-default</h3><h4 class="added">added in 2.2.0</h4><div class="usage"><code>(registry-or-default registry)</code></div><div class="doc"><div class="markdown"><p>Resolves <code>true</code> or <code>nil</code> into the current default registry, otherwise returns the given value.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.2/src/io/randomseed/bankster/api.clj#L33">view source</a></div></div><div class="public anchor" id="var-rounding-mode"><h3>rounding-mode</h3><h4 class="added">added in 2.2.0</h4><div class="usage"><code>(rounding-mode)</code><code>(rounding-mode default)</code></div><div class="doc"><div class="markdown"><p>Returns the current rounding mode.</p>
<p>Delegates to <code>io.randomseed.bankster.scale/rounding-mode</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.2/src/io/randomseed/bankster/api.clj#L44">view source</a></div></div><div class="public anchor" id="var-scale"><h3>scale</h3><h4 class="added">added in 2.2.0</h4><div class="usage"><code>(scale x)</code></div><div class="doc"><div class="markdown"><p>Returns scale for Money and Currency values.</p>
<ul>
<li>For <code>Money</code>: returns the amount scale (may differ from currency nominal scale).</li>
<li>For <code>Currency</code>: returns the nominal scale (or <code>-1</code> for auto-scaled).</li>
<li>For other values: calls <code>io.randomseed.bankster.scale/of</code> to return its scale.</li>
</ul>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.2/src/io/randomseed/bankster/api.clj#L120">view source</a></div></div><div class="public anchor" id="var-scale-apply"><h3>scale-apply</h3><h4 class="added">added in 2.2.0</h4><div class="usage"><code>(scale-apply x)</code><code>(scale-apply x sc)</code><code>(scale-apply x sc rounding)</code></div><div class="doc"><div class="markdown"><p>Applies scaling to a value.</p>
<p>Delegates to <code>io.randomseed.bankster.scale/apply</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.2/src/io/randomseed/bankster/api.clj#L96">view source</a></div></div><div class="public anchor" id="var-with-rescaling"><h3>with-rescaling</h3><h4 class="type">macro</h4><h4 class="added">added in 2.2.0</h4><div class="usage"><code>(with-rescaling rounding-mode &amp; body)</code></div><div class="doc"><div class="markdown"><p>Alias for <code>io.randomseed.bankster.scale/with-rescaling</code>.</p>
<p>Enables re-scaling on some consecutive operations which support it and sets the rounding mode for operations on scaled values. Internally sets <code>scale/*each*</code> to true and <code>scale/*rounding-mode*</code> to the given value.</p>
<p>The first argument should be a valid rounding (from <code>io.randomseed.bankster.scale</code> or <code>java.math.RoundingMode</code>) or one of the following:</p>
<p>CEILING     - rounds towards positive infinity. DOWN        - rounds towards zero. FLOOR       - rounds towards negative infinity. HALF_DOWN   - rounds towards nearest neighbor unless both neighbors are equidistant, in which case rounds down. HALF_EVEN   - rounds towards the nearest neighbor unless both neighbors are equidistant, and if so, rounds towards the even. HALF_UP     - rounds towards the nearest neighbor unless both neighbors are equidistant, and if so, rounds up. UP          - rounds away from zero UNNECESSARY - asserts that the requested operation has an exact result, hence no rounding is necessary.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.2/src/io/randomseed/bankster/api.clj#L74">view source</a></div></div><div class="public anchor" id="var-with-rounding"><h3>with-rounding</h3><h4 class="type">macro</h4><h4 class="added">added in 2.2.0</h4><div class="usage"><code>(with-rounding rounding-mode &amp; body)</code></div><div class="doc"><div class="markdown"><p>Alias for <code>io.randomseed.bankster.scale/with-rounding</code>.</p>
<p>Sets the rounding mode for operations on scaled values.</p>
<p>The first argument should be a valid rounding (from <code>io.randomseed.bankster.scale</code> or <code>java.math.RoundingMode</code>) or one of the following:</p>
<p>CEILING     - rounds towards positive infinity. DOWN        - rounds towards zero. FLOOR       - rounds towards negative infinity. HALF_DOWN   - rounds towards nearest neighbor unless both neighbors are equidistant, in which case rounds down. HALF_EVEN   - rounds towards the nearest neighbor unless both neighbors are equidistant, and if so, rounds towards the even. HALF_UP     - rounds towards the nearest neighbor unless both neighbors are equidistant, and if so, rounds up. UP          - rounds away from zero UNNECESSARY - asserts that the requested operation has an exact result, hence no rounding is necessary.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.2/src/io/randomseed/bankster/api.clj#L54">view source</a></div></div></div></body></html>