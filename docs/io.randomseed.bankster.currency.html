<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>io.randomseed.bankster.currency documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script><link rel="stylesheet" type="text/css" href="css/randomseed.css" /></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Bankster</span> <span class="project-version">2.0.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="10_introduction.html"><div class="inner"><span>Introduction</span></div></a></li><li class="depth-1 "><a href="15_contracts.html"><div class="inner"><span>Bankster Contracts</span></div></a></li><li class="depth-1 "><a href="20_data_structures.html"><div class="inner"><span>Data Structures</span></div></a></li><li class="depth-1 "><a href="30_currency-kinds.html"><div class="inner"><span>Currency kinds</span></div></a></li><li class="depth-1 "><a href="32_currency_traits.html"><div class="inner"><span>Currency traits</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>io</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>randomseed</span></div></div></li><li class="depth-3"><a href="io.randomseed.bankster.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bankster</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.bankster.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-4 branch current"><a href="io.randomseed.bankster.currency.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>currency</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.bankster.jsr-354.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jsr-354</span></div></a></li><li class="depth-4"><a href="io.randomseed.bankster.money.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>money</span></div></a></li><li class="depth-5 branch"><a href="io.randomseed.bankster.money.inter-ops.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>inter-ops</span></div></a></li><li class="depth-5"><a href="io.randomseed.bankster.money.ops.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ops</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.bankster.registry.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>registry</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.bankster.scale.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>scale</span></div></a></li><li class="depth-4"><a href="io.randomseed.bankster.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-5 branch"><a href="io.randomseed.bankster.util.fs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fs</span></div></a></li><li class="depth-5 branch"><a href="io.randomseed.bankster.util.importer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>importer</span></div></a></li><li class="depth-5"><a href="io.randomseed.bankster.util.map.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>map</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-*default*"><div class="inner"><span>*default*</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-add-countries"><div class="inner"><span>add-countries</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-add-countries.21"><div class="inner"><span>add-countries!</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-add-localized-properties"><div class="inner"><span>add-localized-properties</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-add-localized-props.21"><div class="inner"><span>add-localized-props!</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-add-traits"><div class="inner"><span>add-traits</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-add-traits.21"><div class="inner"><span>add-traits!</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-add-weighted-code"><div class="inner"><span>add-weighted-code</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-asset.3F"><div class="inner"><span>asset?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-attempt"><div class="inner"><span>attempt</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-attempt*"><div class="inner"><span>attempt*</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-auto-scaled"><div class="inner"><span>auto-scaled</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-auto-scaled.3F"><div class="inner"><span>auto-scaled?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-big.3F"><div class="inner"><span>big?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-claim.3F"><div class="inner"><span>claim?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-clear-weight"><div class="inner"><span>clear-weight</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-clear-weight.21"><div class="inner"><span>clear-weight!</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-code"><div class="inner"><span>code</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-code-literal"><div class="inner"><span>code-literal</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-commodity.3F"><div class="inner"><span>commodity?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-config-.3Eregistry"><div class="inner"><span>config-&gt;registry</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-countries"><div class="inner"><span>countries</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-credit.3F"><div class="inner"><span>credit?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-crypto.3F"><div class="inner"><span>crypto?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-currency.3F"><div class="inner"><span>currency?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-data-literal"><div class="inner"><span>data-literal</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-decentralised.3F"><div class="inner"><span>decentralised?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-decentralized.3F"><div class="inner"><span>decentralized?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-display-name"><div class="inner"><span>display-name</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-display-name-native"><div class="inner"><span>display-name-native</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-domain"><div class="inner"><span>domain</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-experimental.3F"><div class="inner"><span>experimental?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-fiat.3F"><div class="inner"><span>fiat?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-fiduciary.3F"><div class="inner"><span>fiduciary?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-formatter"><div class="inner"><span>formatter</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-formatter-extended"><div class="inner"><span>formatter-extended</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-funds.3F"><div class="inner"><span>funds?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-has-country.3F"><div class="inner"><span>has-country?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-has-domain.3F"><div class="inner"><span>has-domain?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-has-kind.3F"><div class="inner"><span>has-kind?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-has-numeric-id.3F"><div class="inner"><span>has-numeric-id?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-has-trait.3F"><div class="inner"><span>has-trait?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-in-domain.3F"><div class="inner"><span>in-domain?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-info"><div class="inner"><span>info</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-iso-legacy.3F"><div class="inner"><span>iso-legacy?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-iso-possible.3F"><div class="inner"><span>iso-possible?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-iso-strict-code.3F"><div class="inner"><span>iso-strict-code?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-iso-strict.3F"><div class="inner"><span>iso-strict?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-iso.3F"><div class="inner"><span>iso?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-java"><div class="inner"><span>java</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-java-all-set"><div class="inner"><span>java-all-set</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-kind"><div class="inner"><span>kind</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-kinds"><div class="inner"><span>kinds</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-legacy.3F"><div class="inner"><span>legacy?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-localized-properties"><div class="inner"><span>localized-properties</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-localized-property"><div class="inner"><span>localized-property</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-map-.3Enew"><div class="inner"><span>map-&gt;new</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-metal.3F"><div class="inner"><span>metal?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-Monetary"><div class="inner"><span>Monetary</span></div></a></li><li class="depth-2 branch"><a href="io.randomseed.bankster.currency.html#var-defined.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>defined?</span></div></a></li><li class="depth-2 branch"><a href="io.randomseed.bankster.currency.html#var-definitive.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>definitive?</span></div></a></li><li class="depth-2 branch"><a href="io.randomseed.bankster.currency.html#var-id"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>id</span></div></a></li><li class="depth-2 branch"><a href="io.randomseed.bankster.currency.html#var-of-id"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>of-id</span></div></a></li><li class="depth-2 branch"><a href="io.randomseed.bankster.currency.html#var-present.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>present?</span></div></a></li><li class="depth-2 branch"><a href="io.randomseed.bankster.currency.html#var-resolve"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>resolve</span></div></a></li><li class="depth-2 branch"><a href="io.randomseed.bankster.currency.html#var-resolve-all"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>resolve-all</span></div></a></li><li class="depth-2 branch"><a href="io.randomseed.bankster.currency.html#var-to-code"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>to-code</span></div></a></li><li class="depth-2 branch"><a href="io.randomseed.bankster.currency.html#var-to-code-str"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>to-code-str</span></div></a></li><li class="depth-2 branch"><a href="io.randomseed.bankster.currency.html#var-to-currency"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>to-currency</span></div></a></li><li class="depth-2 branch"><a href="io.randomseed.bankster.currency.html#var-to-id"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>to-id</span></div></a></li><li class="depth-2 branch"><a href="io.randomseed.bankster.currency.html#var-to-id-str"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>to-id-str</span></div></a></li><li class="depth-2 branch"><a href="io.randomseed.bankster.currency.html#var-to-map"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>to-map</span></div></a></li><li class="depth-2 branch"><a href="io.randomseed.bankster.currency.html#var-to-numeric-id"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>to-numeric-id</span></div></a></li><li class="depth-2"><a href="io.randomseed.bankster.currency.html#var-unit"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>unit</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-name"><div class="inner"><span>name</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-name-native"><div class="inner"><span>name-native</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-new"><div class="inner"><span>new</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-new-currency"><div class="inner"><span>new-currency</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-no-numeric-id"><div class="inner"><span>no-numeric-id</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-none.3F"><div class="inner"><span>none?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-nr"><div class="inner"><span>nr</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-ns"><div class="inner"><span>ns</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-ns-code"><div class="inner"><span>ns-code</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-null.3F"><div class="inner"><span>null?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-numeric"><div class="inner"><span>numeric</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-numeric-id"><div class="inner"><span>numeric-id</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-of"><div class="inner"><span>of</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-of-country"><div class="inner"><span>of-country</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-of-domain.3F"><div class="inner"><span>of-domain?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-of-kind.3F"><div class="inner"><span>of-kind?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-of-trait.3F"><div class="inner"><span>of-trait?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-official.3F"><div class="inner"><span>official?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-old.3F"><div class="inner"><span>old?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-peg.3F"><div class="inner"><span>peg?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-possible.3F"><div class="inner"><span>possible?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-real.3F"><div class="inner"><span>real?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-referenced.3F"><div class="inner"><span>referenced?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-register"><div class="inner"><span>register</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-register.21"><div class="inner"><span>register!</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-remove-countries"><div class="inner"><span>remove-countries</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-remove-countries.21"><div class="inner"><span>remove-countries!</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-remove-localized-properties"><div class="inner"><span>remove-localized-properties</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-remove-localized-props.21"><div class="inner"><span>remove-localized-props!</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-remove-traits"><div class="inner"><span>remove-traits</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-remove-traits.21"><div class="inner"><span>remove-traits!</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-same-ids.3F"><div class="inner"><span>same-ids?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-sc"><div class="inner"><span>sc</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-scale"><div class="inner"><span>scale</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-set-default.21"><div class="inner"><span>set-default!</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-set-default-registry.21"><div class="inner"><span>set-default-registry!</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-set-traits"><div class="inner"><span>set-traits</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-set-traits.21"><div class="inner"><span>set-traits!</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-set-weight"><div class="inner"><span>set-weight</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-set-weight.21"><div class="inner"><span>set-weight!</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-special.3F"><div class="inner"><span>special?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-stable.3F"><div class="inner"><span>stable?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-staked.3F"><div class="inner"><span>staked?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-standard.3F"><div class="inner"><span>standard?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-symbol"><div class="inner"><span>symbol</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-symbol-native"><div class="inner"><span>symbol-native</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-test.3F"><div class="inner"><span>test?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-unregister"><div class="inner"><span>unregister</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-unregister.21"><div class="inner"><span>unregister!</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-unset-default.21"><div class="inner"><span>unset-default!</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-update"><div class="inner"><span>update</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-update.21"><div class="inner"><span>update!</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-val-auto-scaled*.3F"><div class="inner"><span>val-auto-scaled*?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-val-auto-scaled.3F"><div class="inner"><span>val-auto-scaled?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-virtual.3F"><div class="inner"><span>virtual?</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-weight"><div class="inner"><span>weight</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-with"><div class="inner"><span>with</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-with-attempt"><div class="inner"><span>with-attempt</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-with-registry"><div class="inner"><span>with-registry</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-with-weight"><div class="inner"><span>with-weight</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.currency.html#var-wrapped.3F"><div class="inner"><span>wrapped?</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">io.randomseed.bankster.currency</h1><h4 class="added">added in 1.0.0</h4><div class="doc"><div class="markdown"><p>Bankster library, currency operations.</p>
</div></div><div class="public anchor" id="var-*default*"><h3>*default*</h3><h4 class="dynamic">dynamic</h4><h4 class="added">added in 1.0.0</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Default currency unit to be applied when creating Money objects without the currency specified.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L72">view source</a></div></div><div class="public anchor" id="var-add-countries"><h3>add-countries</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(add-countries registry currency-id country-ids)</code></div><div class="doc"><div class="markdown"><p>Associates the given country or countries with a currency. If the currency does not exist, exception is thrown. If the currency exists but differs in any detail from the existing currency from the registry, exception is thrown. If the currency exists and equals to the given in any aspect, country associations are added. Links from other countries to the currency are not removed unless the country is already linked with some other currency; in this case it will be unlinked first.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2646">view source</a></div></div><div class="public anchor" id="var-add-countries.21"><h3>add-countries!</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(add-countries! currency country-ids)</code></div><div class="doc"><div class="markdown"><p>Associates the given country (a keyword) or countries (seqable collection of keywords) with a currency in the global registry. If the currency does not exist, exception is thrown. If the currency exists but differs in any detail from the existing currency from the registry, exception is thrown. If the currency exists and equals to the given in any aspect, country associations are added. Links from other countries to the currency are not removed unless the country is already linked with some other currency; in this case it will be unlinked first.</p>
<p>If the currency is nil, returns current state of a global registry (but not a dynamic registry, even if it is set).</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2857">view source</a></div></div><div class="public anchor" id="var-add-localized-properties"><h3>add-localized-properties</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(add-localized-properties registry currency-id properties)</code></div><div class="doc"><div class="markdown"><p>Adds localized properties of a currency to the given registry. Overwrites existing properties.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2680">view source</a></div></div><div class="public anchor" id="var-add-localized-props.21"><h3>add-localized-props!</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(add-localized-props! currency properties)</code></div><div class="doc"><div class="markdown"><p>Associates the given currency with a map of localized properties.</p>
<p>If the currency is nil, returns current state of a global registry (but not a dynamic registry, even if it is set).</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2883">view source</a></div></div><div class="public anchor" id="var-add-traits"><h3>add-traits</h3><h4 class="added">added in 3.0.0</h4><div class="usage"><code>(add-traits registry currency-id traits)</code></div><div class="doc"><div class="markdown"><p>Adds traits for the given currency in the registry (union).</p>
<p>Passing <code>nil</code> or an empty collection is a no-op.</p>
<p>Throws when the currency cannot be resolved in the registry.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3296">view source</a></div></div><div class="public anchor" id="var-add-traits.21"><h3>add-traits!</h3><h4 class="added">added in 3.0.0</h4><div class="usage"><code>(add-traits! currency-id traits)</code></div><div class="doc"><div class="markdown"><p>Adds traits for the given currency in the global registry. See <code>add-traits</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3318">view source</a></div></div><div class="public anchor" id="var-add-weighted-code"><h3>add-weighted-code</h3><h4 class="added">added in 1.2.5</h4><div class="usage"><code>(add-weighted-code registry currency-id)</code></div><div class="doc"><div class="markdown"><p>Associates the existing currency code with the currency object in the given registry using the currency weight attribute. The given currency-id may be expressed with any object that can be used to get the currency from a registry (internally the unit function is used). Therefore, passing the currency object having a different weight will not cause the weight to be updated since it will be used for identification only.</p>
<p>Currency must exist in the cur-id-&gt;cur database of the registry. This function will add an association to the cur-code-&gt;curs database. If both, the weight and code are the same, registry is returned as is.</p>
<p>This is a low-level function used to ensure that a code-to-currency mapping is created within a registry. To simply update currency’s weight, use the update or update! function.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2697">view source</a></div></div><div class="public anchor" id="var-asset.3F"><h3>asset?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(asset? c)</code><code>(asset? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of asset.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3371">view source</a></div></div><div class="public anchor" id="var-attempt"><h3>attempt</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(attempt c)</code><code>(attempt c registry)</code></div><div class="doc"><div class="markdown"><p>Soft currency coercion function.</p>
<p>Returns <code>c</code> when it is already an instance of <code>io.randomseed.bankster.Currency</code>. If <code>c</code> is a definitive currency representation (see <code>Monetary/definitive?</code>), it is coerced locally using <code>to-currency</code>. Otherwise it attempts to resolve <code>c</code> in a registry and returns the registered <code>Currency</code> instance or <code>nil</code> when it cannot be resolved.</p>
<p>This is intended for “non-throwing” code paths (e.g. property predicates) and complements <code>unit</code> and <code>of-id</code> which may throw when a currency is missing.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L1872">view source</a></div></div><div class="public anchor" id="var-attempt*"><h3>attempt*</h3><h4 class="type">macro</h4><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(attempt* c)</code><code>(attempt* c registry)</code></div><div class="doc"><div class="markdown"><p>Soft currency coercion macro.</p>
<p>Returns <code>c</code> when it is already an instance of <code>io.randomseed.bankster.Currency</code>. If <code>c</code> is a definitive currency representation (see <code>Monetary/definitive?</code>), it is coerced locally using <code>to-currency</code>. Otherwise it attempts to resolve <code>c</code> in a registry and returns the registered <code>Currency</code> instance or <code>nil</code> when it cannot be resolved.</p>
<p>Unlike <code>unit</code> and <code>of-id</code>, this helper is meant to be used in “non-throwing” code paths (e.g. property predicates). Argument <code>c</code> is evaluated exactly once.</p>
<p>When <code>registry</code> is not provided, the default registry is used (preferring <code>io.randomseed.bankster.registry/*default*</code> when bound).</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L1840">view source</a></div></div><div class="public anchor" id="var-auto-scaled"><h3>auto-scaled</h3><h4 class="added">added in 1.0.0</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Expresses the scale of a currency which is automatic and not limited to certain decimal places.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L44">view source</a></div></div><div class="public anchor" id="var-auto-scaled.3F"><h3>auto-scaled?</h3><div class="usage"><code>(auto-scaled? c)</code><code>(auto-scaled? c registry)</code></div><div class="doc"><div class="markdown"><p>Alias for big?.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3115">view source</a></div></div><div class="public anchor" id="var-big.3F"><h3>big?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(big? c)</code><code>(big? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency has an automatic scale (decimal places).</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3105">view source</a></div></div><div class="public anchor" id="var-claim.3F"><h3>claim?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(claim? c)</code><code>(claim? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of claim.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3377">view source</a></div></div><div class="public anchor" id="var-clear-weight"><h3>clear-weight</h3><h4 class="added">added in 3.0.0</h4><div class="usage"><code>(clear-weight registry currency-id)</code></div><div class="doc"><div class="markdown"><p>Removes an explicit weight entry for the given currency from the registry (defaults to weight 0) and updates all weight-dependent indexes.</p>
<p>Throws when the currency cannot be resolved in the registry.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2172">view source</a></div></div><div class="public anchor" id="var-clear-weight.21"><h3>clear-weight!</h3><h4 class="added">added in 3.0.0</h4><div class="usage"><code>(clear-weight! currency-id)</code></div><div class="doc"><div class="markdown"><p>Clears an explicit currency weight entry in the global registry. See <code>clear-weight</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2202">view source</a></div></div><div class="public anchor" id="var-code"><h3>code</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(code c)</code><code>(code c registry)</code><code>(code c _locale registry)</code></div><div class="doc"><div class="markdown"><p>Returns a currency code as a string for the given currency object. If the currency identifier is namespaced only the base code (without a namespace) will be returned. Locale argument is ignored.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2080">view source</a></div></div><div class="public anchor" id="var-code-literal"><h3>code-literal</h3><h4 class="added">added in 1.2.4</h4><div class="usage"><code>(code-literal arg)</code></div><div class="doc"><div class="markdown"><p>Tagged literal handler for Clojure code. Emits compound forms that are going to be evaluated.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3864">view source</a></div></div><div class="public anchor" id="var-commodity.3F"><h3>commodity?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(commodity? c)</code><code>(commodity? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of commodity currency.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3420">view source</a></div></div><div class="public anchor" id="var-config-.3Eregistry"><h3>config-&gt;registry</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(config-&gt;registry)</code><code>(config-&gt;registry resource-path)</code><code>(config-&gt;registry resource-path regi)</code></div><div class="doc"><div class="markdown"><p>Loads currencies and countries from an EDN file. First argument should be a string with path to the EDN resource file containing registry data, second should be a registry. Returns a registry initialized using values from the EDN file.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2905">view source</a></div></div><div class="public anchor" id="var-countries"><h3>countries</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(countries c)</code><code>(countries c registry)</code><code>(countries c _locale registry)</code></div><div class="doc"><div class="markdown"><p>Returns a set of country IDs (keywords) for which the given currency is main currency. If there are no countries associated with a currency, returns nil. Locale argument is ignored.</p>
<p>Throws when a currency cannot be resolved in the registry. This lets consumers distinguish “no countries” (<code>nil</code>) from “unknown currency” (exception).</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2261">view source</a></div></div><div class="public anchor" id="var-credit.3F"><h3>credit?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(credit? c)</code><code>(credit? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of credit.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3383">view source</a></div></div><div class="public anchor" id="var-crypto.3F"><h3>crypto?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(crypto? c)</code><code>(crypto? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a cryptocurrency. It is just a helper that check if the domain of a currency equals to <code>:CRYPTO</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3121">view source</a></div></div><div class="public anchor" id="var-currency.3F"><h3>currency?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(currency? c)</code><code>(currency? c _registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given value is a currency. Registry argument is ignored.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2984">view source</a></div></div><div class="public anchor" id="var-data-literal"><h3>data-literal</h3><h4 class="added">added in 1.2.4</h4><div class="usage"><code>(data-literal arg)</code></div><div class="doc"><div class="markdown"><p>Tagged literal handler for EDN data files. Emits Currency objects or nil values.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3873">view source</a></div></div><div class="public anchor" id="var-decentralised.3F"><h3>decentralised?</h3><div class="usage"><code>(decentralised? c)</code><code>(decentralised? c registry)</code></div><div class="doc"><div class="markdown"><p>Alias for decentralized?</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3502">view source</a></div></div><div class="public anchor" id="var-decentralized.3F"><h3>decentralized?</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(decentralized? c)</code><code>(decentralized? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of decentralized currency. It uses currency traits database in a registry to find a trait named <code>:control/decentralized</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3494">view source</a></div></div><div class="public anchor" id="var-display-name"><h3>display-name</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(display-name currency)</code><code>(display-name currency locale)</code><code>(display-name currency locale registry)</code></div><div class="doc"><div class="markdown"><p>Returns a currency display name as a string for the given currency object and locale. If the locale is not given, a default one is used. Uses global registry if a registry is not given.</p>
<p>The following tactic is applied:</p>
<ul>
<li>
<p>The registry field .cur-id-&gt;localized is looked up for the currency ID key. If it’s found then a key with the given locale object (a kind of <code>java.util.Locale</code>) is obtained. If there is no such key, the default one :* is tried (a keyword). The resulting value should be a map of localized properties in which an entry under the key <code>:symbol</code> should exist. Its value will be returned, if found.</p>
</li>
<li>
<p>If the above method failed and the given currency is ISO-standardized then Java methods will be tried to obtain it.</p>
</li>
<li>
<p>If the above method failed a currency code will be returned.</p>
</li>
</ul>
<p>A locale can be expressed as <code>java.util.Locale</code> object or any other object (like a string or a keyword) which can be used to look up the locale.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3702">view source</a></div></div><div class="public anchor" id="var-display-name-native"><h3>display-name-native</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(display-name-native currency)</code><code>(display-name-native currency registry)</code></div><div class="doc"><div class="markdown"><p>Like display-name but for ISO-standardized currencies uses locale assigned to the first country where a currency is the default. When locale is given it is ignored.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3745">view source</a></div></div><div class="public anchor" id="var-domain"><h3>domain</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(domain c)</code><code>(domain c registry)</code><code>(domain c _locale registry)</code></div><div class="doc"><div class="markdown"><p>Returns currency domain as a keyword. For currencies added with simple identifiers (without a namespace) and numerical IDs present it will be <code>:ISO-4217</code>. For currencies with namespace-qualified identifiers it will be the upper-cased namespace name (e.g. <code>:CRYPTO</code>) set during creation of a currency object. Locale argument is ignored.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2006">view source</a></div></div><div class="public anchor" id="var-experimental.3F"><h3>experimental?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(experimental? c)</code><code>(experimental? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of experimental currency.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3456">view source</a></div></div><div class="public anchor" id="var-fiat.3F"><h3>fiat?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(fiat? c)</code><code>(fiat? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of fiat currency.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3389">view source</a></div></div><div class="public anchor" id="var-fiduciary.3F"><h3>fiduciary?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(fiduciary? c)</code><code>(fiduciary? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of fiduciary currency.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3402">view source</a></div></div><div class="public anchor" id="var-formatter"><h3>formatter</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(formatter currency)</code><code>(formatter currency locale)</code><code>(formatter currency locale registry)</code></div><div class="doc"><div class="markdown"><p>Returns currency formatter as <code>java.text.DecimalFormat</code> instance for the given currency and locale. If locale is not given the default one will be used. Due to caching strategy it is advised to express locale with a keyword.</p>
<p>The formatter is a mutable clone of Java data structure.</p>
<p>In case of currencies other than ISO-standardized (and predefined in Java) the currency field of this formatter will be set to the currency of XXX.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3922">view source</a></div></div><div class="public anchor" id="var-formatter-extended"><h3>formatter-extended</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(formatter-extended currency)</code><code>(formatter-extended currency locale)</code><code>(formatter-extended currency locale opts)</code><code>(formatter-extended currency locale {:keys [scale rounding-mode grouping grouping-size negative-prefix negative-suffix positive-prefix positive-suffix always-sep-dec currency-symbol-fn min-fraction-digits max-fraction-digits min-integer-digits max-integer-digits], :as opts} registry)</code></div><div class="doc"><div class="markdown"><p>Returns a currency formatter as <code>java.text.DecimalFormat</code> instance for the given currency, customizable with the given opts map. If the locale is not given then the default one will be used. Due to caching strategy it is advised to express locale with a keyword.</p>
<p>The formatter is a mutable clone of Java data structure.</p>
<p>In case of currencies other than ISO-standardized (and predefined in Java) the currency field of this formatter will be set to the currency of XXX.</p>
<p>Options map can have the following keys:</p>
<ul>
<li><code>:rounding-mode</code>   - RoundingMode, rounding mode to apply when scaling</li>
<li><code>:grouping</code>        - Boolean, if true then grouping will be used</li>
<li><code>:grouping-size</code>   - integer, size of a group when grouping</li>
<li><code>:negative-prefix</code> - String, negative prefix to use</li>
<li><code>:negative-suffix</code> - String, negative suffix to use</li>
<li><code>:positive-prefix</code> - String, positive prefix to use</li>
<li><code>:positive-suffix</code> - String, positive suffix to use</li>
<li><code>:always-sep-dec</code>  - Boolean, if true then the decimal separator will always be shown</li>
<li><code>:currency-symbol-fn</code>  - a function used on a bankster/Currency object to get its symbol as a string</li>
<li><code>:min-fraction-digits</code> - integer, the minimum number of digits allowed in the fraction portion of an amount</li>
<li><code>:min-integer-digits</code> - integer, the minimum number of digits allowed in the integer portion of an amount</li>
<li><code>:max-fraction-digits</code> - integer, the maximum number of digits allowed in the fraction portion of an amount</li>
<li><code>:max-integer-digits</code>  - integer, the maximum number of digits allowed in the integer portion of an amount</li>
<li><code>:scale</code>               - sets both <code>:min-fraction-digits</code> and <code>:max-fraction-digits</code> to the same value.</li>
</ul>
<p>When choosing different currency, all parameters of a formatter are initially set to that currency. Additionally re-scaling may take place for the amount if scales are different.</p>
<p>The function assigned to the <code>:currency-symbol-fn</code> should take 3 arguments: currency, locale and registry.</p>
<p>It is advised to express locale using a keyword when huge amount of operations is expected.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3949">view source</a></div></div><div class="public anchor" id="var-funds.3F"><h3>funds?</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(funds? c)</code><code>(funds? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of funds/settlement currency.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3408">view source</a></div></div><div class="public anchor" id="var-has-country.3F"><h3>has-country?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(has-country? c)</code><code>(has-country? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency has at least one country for which it is an official currency.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3046">view source</a></div></div><div class="public anchor" id="var-has-domain.3F"><h3>has-domain?</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(has-domain? c)</code><code>(has-domain? c registry)</code><code>(has-domain? c ns)</code><code>(has-domain? c ns registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency <code>c</code> has its domain defined (when only currency and optional registry is given). If <code>ns</code> is given it returns <code>true</code> if the currency has its domain set to be the exact keyword given.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3067">view source</a></div></div><div class="public anchor" id="var-has-kind.3F"><h3>has-kind?</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(has-kind? c)</code><code>(has-kind? c registry)</code><code>(has-kind? c tag registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency <code>c</code> has its kind defined (when only currency and optional registry is given). If <code>tag</code> is given it returns <code>true</code> if the currency has its kind set to be the exact keyword given.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3173">view source</a></div></div><div class="public anchor" id="var-has-numeric-id.3F"><h3>has-numeric-id?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(has-numeric-id? c)</code><code>(has-numeric-id? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency has a numeric ID.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3036">view source</a></div></div><div class="public anchor" id="var-has-trait.3F"><h3>has-trait?</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(has-trait? c)</code><code>(has-trait? c registry)</code><code>(has-trait? c tag)</code><code>(has-trait? c tag registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency <code>c</code> has any trait defined (when only currency and optional registry is given). If <code>tag</code> is given it returns <code>true</code> if the currency has one of its traits set to be the exact keyword given.</p>
<p>Traits are registry attributes (stored in <code>Registry/:cur-id-&gt;traits</code>). Any <code>:traits</code> extension field present on ad-hoc <code>Currency</code> values is ignored.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3215">view source</a></div></div><div class="public anchor" id="var-in-domain.3F"><h3>in-domain?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(in-domain? ns c)</code><code>(in-domain? ns c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency has a domain set to the first given argument.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3059">view source</a></div></div><div class="public anchor" id="var-info"><h3>info</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(info c)</code><code>(info c registry)</code><code>(info c _locale registry)</code></div><div class="doc"><div class="markdown"><p>Returns a map describing the given currency, including registry-associated properties when available.</p>
<p>Base fields come from the currency’s map representation (via <code>into {}</code>) and include any extension fields. When a registry can be consulted (default or explicitly passed), this function also adds:</p>
<ul>
<li><code>:countries</code> - a set of associated country IDs,</li>
<li><code>:localized</code> - a localized properties map (locale keywords, including <code>:*</code>),</li>
<li><code>:traits</code>    - a set of associated traits.</li>
</ul>
<p>Returns <code>nil</code> when the given value points to a registry currency but cannot be resolved. Locale argument is ignored.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2208">view source</a></div></div><div class="public anchor" id="var-iso-legacy.3F"><h3>iso-legacy?</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(iso-legacy? c)</code><code>(iso-legacy? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency was an official currency but is now considered a legacy currency having an identifier compliant with the ISO standard. It is just a helper which checks if the <code>:domain</code> field of a currency equals to <code>:ISO-4217-LEGACY</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3136">view source</a></div></div><div class="public anchor" id="var-iso-possible.3F"><h3>iso-possible?</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(iso-possible? c)</code><code>(iso-possible? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given value is a possible ISO-4217 currency: can be used to get an ISO currency from a registry, can be used to create ISO currency on its own, or is an ISO currency.</p>
<p>This predicate is semantically wide. If the string or keyword alone cannot be used to create a valid, ad-hoc ISO currency but it can get an ISO currency from a registry, then the function will return <code>true</code>. Same for certain numbers: if they cannot be used to create an ISO currency on their own (since there is no ID) but can be used to look one up in a registry (treating a number as an ISO-4217 code), they will be positively tested as possible values for currency creation (if there was a hit).</p>
<p>If <code>registry</code> is not given or is <code>nil</code>, the default one is used.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3012">view source</a></div></div><div class="public anchor" id="var-iso-strict-code.3F"><h3>iso-strict-code?</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(iso-strict-code? kid)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> when the given currency code, expressed as keyword, is exactly a 3-character, simple keyword consisting only of uppercase letters in range of A-Z. Otherwise it returns <code>false</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L108">view source</a></div></div><div class="public anchor" id="var-iso-strict.3F"><h3>iso-strict?</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(iso-strict? c)</code><code>(iso-strict? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is an official currency which is currently in use (not a legacy money) and its both identifier and numerical identifier is compliant with the ISO standard.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3128">view source</a></div></div><div class="public anchor" id="var-iso.3F"><h3>iso?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(iso? c)</code><code>(iso? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is classified as ISO because its kind is set to <code>:iso</code> or its descendants. It may include not just current ISO currencies but also legacy ones. See also <code>io.randomseed.bankster.currency/iso-strict?</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3357">view source</a></div></div><div class="public anchor" id="var-java"><h3>java</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(java currency)</code><code>(java currency registry)</code></div><div class="doc"><div class="markdown"><p>For ISO-standardized currency, returns corresponding <code>java.util.Currency</code> object. If the currency does not exist, is not ISO (its <code>:domain</code> is not <code>:ISO-4217</code>), has a different scale (fraction digits), or a different numeric code, <code>nil</code> is returned.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2302">view source</a></div></div><div class="public anchor" id="var-java-all-set"><h3>java-all-set</h3><h4 class="added">added in 2.0.0</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>A set of Java currencies (instances of <code>java.util.Currency</code>, including obsolete currencies).</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L98">view source</a></div></div><div class="public anchor" id="var-kind"><h3>kind</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(kind c)</code><code>(kind c registry)</code><code>(kind c _locale registry)</code></div><div class="doc"><div class="markdown"><p>Returns currency kind. It is a keyword which describes origin of its value. Currently known top-level kinds are:</p>
<ul>
<li><code>:iso</code>       - ISO-4217 currencies, funds, commodities, special markers.</li>
<li><code>:virtual</code>   - Virtual units (stable tokens, credits, native tokens, special).</li>
<li><code>:currency</code>  - Meta: currency-like units; parent for <code>:fiduciary</code> money.</li>
<li><code>:asset</code>     - Meta: value-bearing units (<code>:assets</code>, <code>:claims</code>, <code>:stable</code>, reference-based).</li>
<li><code>:fiat</code>      - Meta umbrella: fiat-related tags (issuer fiats vs fiat-as-anchor).</li>
<li><code>:funds</code>     - Meta: funds, settlement units, units of account.</li>
<li><code>:commodity</code> - Meta: commodity-based units and commodity anchoring.</li>
<li><code>:special</code>   - Meta: special-purpose markers (<code>:experimental</code>, <code>:test</code>, <code>:null</code>).</li>
</ul>
<p>The function may return <code>nil</code> if the currency is a no-currency. Locale argument is ignored. To list all known kinds use <code>kinds</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2043">view source</a></div></div><div class="public anchor" id="var-kinds"><h3>kinds</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(kinds)</code><code>(kinds registry)</code></div><div class="doc"><div class="markdown"><p>Returns a map of all registered currency kinds as keys and their ancestors as sets. It will not contain ad-hoc kinds that wasn’t added to a registry’s hierarchy. Uses the given <code>registry</code> or a global one.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2031">view source</a></div></div><div class="public anchor" id="var-legacy.3F"><h3>legacy?</h3><h4 class="added">added in 1.3.0</h4><div class="usage"><code>(legacy? c)</code><code>(legacy? c registry)</code></div><div class="doc"><div class="markdown"><p>Alias for iso-legacy?</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3159">view source</a></div></div><div class="public anchor" id="var-localized-properties"><h3>localized-properties</h3><h4 class="added">added in 1.0.8</h4><div class="usage"><code>(localized-properties c)</code><code>(localized-properties c registry)</code></div><div class="doc"><div class="markdown"><p>Returns a map of localized properties for the given currency. Locale objects are translated back to their keyword representations.</p>
<p>Throws when a currency cannot be resolved in the registry. Returns <code>nil</code> when there are no localized properties for the currency.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3525">view source</a></div></div><div class="public anchor" id="var-localized-property"><h3>localized-property</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(localized-property property currency-id)</code><code>(localized-property property currency-id locale)</code><code>(localized-property property currency-id locale registry)</code></div><div class="doc"><div class="markdown"><p>Gets the localized property of a currency from the given registry and locale. If the registry is not given, the global one will be used. If the locale is not given, the default locale for the environment will be used. Locale can be expressed as a Locale object or any object which can be used to identify the locale (e.g. a keyword or a string).</p>
<p>Throws when a currency cannot be resolved in the registry. Returns <code>nil</code> when the property is not present for the currency or when the currency has no localized properties.</p>
<p>Localized properties are maps keyed by currency identifiers, containing another maps keyed by locale objects. There is a special key :* which identifies default properties used when there are no properties in locale-keyed maps.</p>
<p>Let’s take a hypothetical entry of a registry database <code>.cur-id-&gt;localized</code>:</p>
<pre><code class="language-clojure">{:XXX {#object[java.util.Locale 0x3f5af72f "en_US"] {:symbol "$"}}
      {#object[java.util.Locale 0x3f5af72f "en"]    {:symbol "X$"}
      {:* {:symbol "ABC"}}
</code></pre>
<ul>
<li>Calling <code>(localized-property :symbol :XXX :en_US)</code> will return <code>$</code>.</li>
<li>Calling <code>(localized-property :symbol :XXX :en_GB)</code> will return <code>X$</code>.</li>
<li>Calling <code>(localized-property :symbol :XXX :pl_PL)</code> will return <code>ABC</code>.</li>
</ul>
<p>The first is self-explanatory.</p>
<p>The second falls back to <code>en</code> because the function will re-try the language part (<code>en</code>) alone when the property was not found. The same method is repeatedly applied to other components of a locale (variant, script and extensions – if any). So for the locale identified by <code>th_TH_TH_#u-nu-thai</code> the following keys will be tried:</p>
<ul>
<li><code>th_TH_TH_#u-nu-thai</code>,</li>
<li><code>th_TH_TH_#u-nu</code>,</li>
<li><code>th_TH_TH_#u</code>,</li>
<li><code>th_TH_TH</code>,</li>
<li><code>th_TH</code> and <code>th</code>.</li>
</ul>
<p>The third example renders <code>ABC</code> because there is an entry of <code>:symbol</code> in the default properties map under the key <code>:*</code>.</p>
<p>Please note that functions for getting particular properties may apply additional steps to obtain them. For instance, the display-name function will first call the localized-property and if it fails it will fall back to Java methods (if the currency is ISO-standardized). If that will fail too then it will return a currency code.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3556">view source</a></div></div><div class="public anchor" id="var-map-.3Enew"><h3>map-&gt;new</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(map-&gt;new m)</code></div><div class="doc"><div class="markdown"><p>Creates a new currency record from a map.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L326">view source</a></div></div><div class="public anchor" id="var-metal.3F"><h3>metal?</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(metal? c)</code><code>(metal? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of precious metal.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3414">view source</a></div></div><div class="public anchor" id="var-Monetary"><h3>Monetary</h3><h4 class="type">protocol</h4><h4 class="added">added in 1.0.0</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>The Monetary protocol describes basic operations on currencies. It uses single dispatch to allow currencies to be expressed with different kinds of data (keywords, symbols, strings, native Currency objects etc.).</p>
<p>Methods prefixed with <code>to-</code> are cheap, local, and registry-free coercions. Methods <code>resolve</code> and <code>resolve-all</code> consult a registry to map hints to concrete registered currencies.</p>
</div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-defined.3F"><h3>defined?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(defined? id)</code><code>(defined? id registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if <em>any</em> currency can be resolved from <code>id</code> in the registry.</p>
<p><code>id</code> may be: - a keyword (looked up as-is and, when namespaced, also by its unqualified name), - an <code>io.randomseed.bankster.Currency</code> (looked up by its <code>:id</code>), - a <code>java.util.Currency</code> (looked up by its currency code converted to a keyword), - a number (looked up as a numeric currency identifier).</p>
<p>This is an existence check only. It may return <code>true</code> even when <code>id</code> is a currency-like object whose properties do not match the registered currency.</p>
<p>If <code>registry</code> is not provided, the global registry is used, preferring the dynamic <code>io.randomseed.bankster.registry/*default*</code> when bound.</p>
</div></div></div><div class="public anchor" id="var-definitive.3F"><h3>definitive?</h3><h4 class="added">added in 3.0.0</h4><div class="usage"><code>(definitive? this)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> when the given value is a <em>definitive</em> currency representation: it carries enough information (either explicitly or by type implication) to create a currency and to make negative property checks meaningful for the attributes it determines (e.g. when <code>domain</code> is not <code>:ISO-4217</code> then it is definitely not an ISO currency).</p>
<p>For map-based currency specifications, definitiveness is expressed by the presence of keys for core attributes (domain, scale, numeric id). Key presence is significant: an explicitly present key with a <code>nil</code> value means “specified as nil” and should be trusted.</p>
<p>Currency <code>kind</code> is treated as an optional classification attribute. If present in a representation, it is trusted; if absent, it remains unknown (not inferred).</p>
<p>This method is registry-free.</p>
</div></div></div><div class="public anchor" id="var-id"><h3>id</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(id id)</code><code>(id id registry)</code></div><div class="doc"><div class="markdown"><p>Returns a unique identifier of the given currency as a keyword. The currency can be expressed as a <code>Currency</code> object, a keyword, a string, or any other object which can be handled by the <code>io.randomseed.bankster.currency/unit</code>.</p>
<p>The role of the default registry is advisory. If the registry argument is not given (or it is <code>nil</code>) then the ID will be returned regardless of whether the currency exists in a registry, by simply converting it to a keyword or getting a field from a currency-like object. Still, the default registry will be consulted to resolve possible currency code. For example: if <code>BTC</code> is a currency code of a registered currency identified as <code>:crypto/BTC</code> then the resulting value for <code>:BTC</code> will be <code>:crypto/BTC</code>; but for <code>:BLABLA</code> (which does not exist in a registry) the resulting value will be <code>:BLABLA</code>.</p>
<p>If a registry is given (or <code>true</code> value is passed, indicating to use default registry) then trying to use a non-existing currency will cause an exception to be thrown.</p>
</div></div></div><div class="public anchor" id="var-of-id"><h3>of-id</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(of-id id)</code><code>(of-id id registry)</code></div><div class="doc"><div class="markdown"><p>Returns a currency object for the given ID and registry.</p>
<p>If the registry is not given, it will use the default registry (will first try a registry bound to the <code>io.randomseed.bankster.registry/*default*</code> dynamic variable, then the global registry).</p>
<p>The currency is always taken from a registry (on a basis of the extracted ID) even if a <code>Currency</code> or currency-like object was given, with one exception: if <code>registry</code> is explicitly set to <code>nil</code> then a <code>Currency</code> object will be returned as is (or created out of currency-like object and returned) without consulting any registry.</p>
</div></div></div><div class="public anchor" id="var-present.3F"><h3>present?</h3><h4 class="added">added in 1.0.2</h4><div class="usage"><code>(present? id)</code><code>(present? id registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the registry contains a currency consistent with <code>id</code>.</p>
<p>If <code>id</code> is a plain identifier (e.g. a keyword), this behaves as a simple presence test: it returns <code>true</code> when any currency resolves from that identifier.</p>
<p>If <code>id</code> is a currency-like object, this performs a <em>field match</em> against the registered <code>io.randomseed.bankster.Currency</code>:</p>
<ul>
<li>only fields that can be derived from <code>id</code> <em>and</em> are fields of <code>Currency</code> participate in the match,</li>
<li>all such derived fields must match exactly.</li>
</ul>
<p>Examples: - If <code>id</code> is a number, only the numeric currency identifier must match. - If <code>id</code> is a <code>java.util.Currency</code>, the currency ID/code, scale (fraction digits), and numeric ISO identifier must all match the registered currency.</p>
<p>If <code>registry</code> is not provided, the global registry is used, preferring the dynamic <code>io.randomseed.bankster.registry/*default*</code> when bound.</p>
</div></div></div><div class="public anchor" id="var-resolve"><h3>resolve</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(resolve this)</code><code>(resolve this registry)</code></div><div class="doc"><div class="markdown"><p>Resolves a currency representation to a registered <code>Currency</code> by consulting a registry.</p>
<p>When <code>registry</code> is <code>nil</code>, the default registry is used (preferring <code>io.randomseed.bankster.registry/*default*</code> when bound). Returns the resolved <code>Currency</code> or <code>nil</code> when it cannot be resolved.</p>
</div></div></div><div class="public anchor" id="var-resolve-all"><h3>resolve-all</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(resolve-all this)</code><code>(resolve-all this registry)</code></div><div class="doc"><div class="markdown"><p>Resolves a currency representation to all matching registered currencies by consulting a registry.</p>
<p>When <code>registry</code> is <code>nil</code>, the default registry is used (preferring <code>io.randomseed.bankster.registry/*default*</code> when bound). Returns a set of resolved currencies or <code>nil</code> when nothing matches.</p>
</div></div></div><div class="public anchor" id="var-to-code"><h3>to-code</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(to-code this)</code></div><div class="doc"><div class="markdown"><p>Coerces a currency representation to a currency code (unqualified keyword). Registry-free. May return <code>nil</code> if the code cannot be derived.</p>
</div></div></div><div class="public anchor" id="var-to-code-str"><h3>to-code-str</h3><h4 class="added">added in 3.0.0</h4><div class="usage"><code>(to-code-str this)</code></div><div class="doc"><div class="markdown"><p>Coerces a currency representation to a currency code string.</p>
<p>Registry-free. Must not intern keywords. Typically the upper-cased name part without a namespace (e.g. <code>"USDT"</code>).</p>
</div></div></div><div class="public anchor" id="var-to-currency"><h3>to-currency</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(to-currency this)</code></div><div class="doc"><div class="markdown"><p>Coerces a currency representation to a <code>Currency</code> object without consulting a registry.</p>
<p>Returns a <code>Currency</code> instance or <code>nil</code> when it cannot be constructed.</p>
</div></div></div><div class="public anchor" id="var-to-id"><h3>to-id</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(to-id this)</code></div><div class="doc"><div class="markdown"><p>Coerces a currency representation to a currency identifier (keyword). Registry-free. May return <code>nil</code> if the identifier cannot be derived.</p>
</div></div></div><div class="public anchor" id="var-to-id-str"><h3>to-id-str</h3><h4 class="added">added in 3.0.0</h4><div class="usage"><code>(to-id-str this)</code></div><div class="doc"><div class="markdown"><p>Coerces a currency representation to a currency identifier string.</p>
<p>Registry-free. Must not intern keywords. Intended for security-sensitive code paths where the input may be untrusted.</p>
<p>Suggested canonical form: - unqualified IDs: upper-case name (e.g. <code>"PLN"</code>), - qualified IDs: original namespace + <code>/</code> + upper-case name (e.g. <code>"crypto/USDT"</code> or <code>"CrYpTo/USDT"</code>).</p>
</div></div></div><div class="public anchor" id="var-to-map"><h3>to-map</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(to-map this)</code></div><div class="doc"><div class="markdown"><p>Coerces a currency representation to a map of currency fields. Registry-free. Returns a map (possibly partial) or <code>nil</code>.</p>
</div></div></div><div class="public anchor" id="var-to-numeric-id"><h3>to-numeric-id</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(to-numeric-id this)</code></div><div class="doc"><div class="markdown"><p>Coerces a currency representation to its numeric identifier (ISO 4217 numeric code, when available).</p>
<p>Registry-free. Implementations should return a number when it can be derived, otherwise they may return <code>nil</code> or a sentinel numeric value.</p>
</div></div></div><div class="public anchor" id="var-unit"><h3>unit</h3><h4 class="added">added in 1.0.2</h4><div class="usage"><code>(unit id)</code><code>(unit id registry)</code></div><div class="doc"><div class="markdown"><p>Returns a <code>Currency</code> object for the given ID, currency code, numeric ID, or a currency-like object.</p>
<p>If a <code>Currency</code> record is passed and <code>registry</code>: - is not given (unary arity), or - is explicitly set to <code>nil</code>,</p>
<p>then the registry will NOT be consulted and the <code>Currency</code> object will be returned as-is.</p>
<p>If a valid <code>registry</code> is passed (or set to <code>true</code> value indicating that a default registry should be used), it will be consulted to find the exact match. For currency identifiers (keywords, strings, numbers) it will resolve them from the registry.</p>
<p>For currency maps, <code>unit</code> treats the map as a <em>registry lookup specification</em>: it will query the registry using meaningful keys present in the map (a mask-like match). If more than one currency matches, the best match is selected by weight (smallest weight wins). If no currency matches, an exception will be thrown. Use <code>resolve-all</code> to obtain all matches.</p>
<p>For <code>Currency</code> objects all fields must be exact except <code>:domain</code> and <code>:kind</code> which may be <code>nil</code> to act as wildcards. Only if the currency exists in the registry, the <code>Currency</code> record will be returned.</p>
<p>If the registry is consulted and the currency does not exist in a registry, an exception will be thrown.</p>
</div></div></div></div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L369">view source</a></div></div><div class="public anchor" id="var-name"><h3>name</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(name currency)</code><code>(name currency locale)</code><code>(name currency locale registry)</code></div><div class="doc"><div class="markdown"><p>Alias for display-name.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3768">view source</a></div></div><div class="public anchor" id="var-name-native"><h3>name-native</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(name-native currency)</code><code>(name-native currency registry)</code></div><div class="doc"><div class="markdown"><p>Alias for display-name-native.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3776">view source</a></div></div><div class="public anchor" id="var-new"><h3>new</h3><div class="usage"><code>(new id)</code><code>(new id numeric-id)</code><code>(new id numeric-id scale)</code><code>(new id numeric-id scale kind)</code><code>(new id numeric-id scale kind domain)</code><code>(new id numeric-id scale kind domain weight)</code></div><div class="doc"><div class="markdown"><p>Alias for new-currency.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L354">view source</a></div></div><div class="public anchor" id="var-new-currency"><h3>new-currency</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(new-currency id)</code><code>(new-currency id numeric-id)</code><code>(new-currency id numeric-id scale)</code><code>(new-currency id numeric-id scale kind)</code><code>(new-currency id numeric-id scale kind domain)</code><code>(new-currency id numeric-id scale kind domain weight)</code></div><div class="doc"><div class="markdown"><p>Creates new currency record from values passed as arguments.</p>
<p>Identifier casing rules:</p>
<ul>
<li>Currency <em>name</em> (code) is canonicalized to upper-case (<code>:pln</code> -&gt; <code>:PLN</code>, <code>:crypto/usdt</code> -&gt; <code>:crypto/USDT</code>).</li>
<li>Namespace casing is preserved as provided (except <code>ISO-4217</code>, which is treated case-insensitively and always stripped).</li>
</ul>
<p>When the given <code>id</code> has the <code>ISO-4217</code> namespace (case insensitive), it will be stripped of it.</p>
<p>When the namespace <code>ISO-4217</code> was removed from the ID, the domain will be set to <code>:ISO-4217</code>, unless the <code>domain</code> argument is given and it is not <code>nil</code>.</p>
<p>In short: setting <code>ISO-4217</code> namespace in <code>id</code> will always cause it to be removed, and a new currency will be treated as if it was an ISO currency, unless the domain was explicitly given.</p>
<p>Domain property will also be automatically set to <code>:ISO-4217</code> when:</p>
<ul>
<li><code>domain</code> was not given (or is <code>nil</code>) and was not set automatically,</li>
<li><code>numeric-id</code> is given and is greater than 0,</li>
<li>the given <code>id</code> is a simple keyword (after potential stripping the ISO namespace) and consists of exactly 3 uppercase letters from A to Z only.</li>
</ul>
<p>Setting the domain manually to <code>:ISO-4217</code> (with <code>domain</code> argument or by setting a namespace of <code>id</code> to <code>ISO-4217</code>) will cause the currency to be treated as an ISO currency without any checks regarding its scale or numerical identifier. Use with caution. This is intended for applications requiring high elasticity.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L257">view source</a></div></div><div class="public anchor" id="var-no-numeric-id"><h3>no-numeric-id</h3><h4 class="added">added in 1.0.0</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Expresses the value of currency’s numeric ID which does not exist.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L39">view source</a></div></div><div class="public anchor" id="var-none.3F"><h3>none?</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(none? c)</code><code>(none? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency does not exist, or there is no currency (value is <code>nil</code>, <code>false</code>, an empty collection), or it is a pseudo-currency with its kind set to <code>:NULL</code> or its descendants.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3480">view source</a></div></div><div class="public anchor" id="var-nr"><h3>nr</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(nr c)</code><code>(nr c registry)</code><code>(nr c _locale registry)</code></div><div class="doc"><div class="markdown"><p>Returns currency numeric ID as a long number. For currencies without an assigned number it will return nil. Locale argument is ignored.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L1950">view source</a></div></div><div class="public anchor" id="var-ns"><h3>ns</h3><div class="usage"><code>(ns c)</code><code>(ns c registry)</code><code>(ns c locale registry)</code></div><div class="doc"><div class="markdown"><p>Alias for domain.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2023">view source</a></div></div><div class="public anchor" id="var-ns-code"><h3>ns-code</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(ns-code c)</code><code>(ns-code c registry)</code><code>(ns-code c _locale registry)</code></div><div class="doc"><div class="markdown"><p>Returns a currency code as a string for the given currency object. If the currency identifier is namespaced the namespace will be used as a prefix and slash character as a separator. Locale argument is ignored.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2067">view source</a></div></div><div class="public anchor" id="var-null.3F"><h3>null?</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(null? c)</code><code>(null? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of null currency.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3474">view source</a></div></div><div class="public anchor" id="var-numeric"><h3>numeric</h3><div class="usage"><code>(numeric c)</code><code>(numeric c registry)</code><code>(numeric c locale registry)</code></div><div class="doc"><div class="markdown"><p>Alias for nr.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L1974">view source</a></div></div><div class="public anchor" id="var-numeric-id"><h3>numeric-id</h3><div class="usage"><code>(numeric-id c)</code><code>(numeric-id c registry)</code><code>(numeric-id c locale registry)</code></div><div class="doc"><div class="markdown"><p>Alias for nr.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L1967">view source</a></div></div><div class="public anchor" id="var-of"><h3>of</h3><h4 class="type">macro</h4><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(of currency)</code><code>(of currency registry)</code></div><div class="doc"><div class="markdown"><p>Returns a currency for the given value by querying the given registry or a global registry, which may be shadowed by the value of <code>io.randomseed.bankster.registry/*default* (see ``io.randomseed.bankster.registry/with`` or</code>with-registry`).</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L1930">view source</a></div></div><div class="public anchor" id="var-of-country"><h3>of-country</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(of-country country-id)</code><code>(of-country country-id registry)</code><code>(of-country country-id _locale registry)</code></div><div class="doc"><div class="markdown"><p>Returns a currency for the given country identified by a country ID (which should be a keyword). If there is no currency or country of the given ID does not exist, returns nil. Locale argument is ignored.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2286">view source</a></div></div><div class="public anchor" id="var-of-domain.3F"><h3>of-domain?</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(of-domain? domain c)</code><code>(of-domain? domain c registry)</code></div><div class="doc"><div class="markdown"><p>Checks if a domain of the given currency <code>c</code> equals to the one given as a first argument <code>domain</code> or if it belongs to a <code>domain</code> (checked with <code>clojure.core/isa?</code>).</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3086">view source</a></div></div><div class="public anchor" id="var-of-kind.3F"><h3>of-kind?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(of-kind? kind c)</code><code>(of-kind? kind c registry)</code></div><div class="doc"><div class="markdown"><p>Checks if a kind of the given currency <code>c</code> equals to the one given as a second argument <code>kind</code> or if it belongs to a <code>kind</code> (checked with <code>clojure.core/isa?</code>).</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3198">view source</a></div></div><div class="public anchor" id="var-of-trait.3F"><h3>of-trait?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(of-trait? tag c)</code><code>(of-trait? tag c registry)</code></div><div class="doc"><div class="markdown"><p>Checks if any trait of the given currency <code>c</code> equals to the one given as a second argument <code>tag</code>, or if it belongs to a <code>tag</code> (checked with <code>clojure.core/isa?</code>).</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3251">view source</a></div></div><div class="public anchor" id="var-official.3F"><h3>official?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(official? c)</code><code>(official? c registry)</code></div><div class="doc"><div class="markdown"><p>Alias for iso-strict?</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3145">view source</a></div></div><div class="public anchor" id="var-old.3F"><h3>old?</h3><h4 class="added">added in 1.3.0</h4><div class="usage"><code>(old? c)</code><code>(old? c registry)</code></div><div class="doc"><div class="markdown"><p>Alias for iso-legacy?</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3166">view source</a></div></div><div class="public anchor" id="var-peg.3F"><h3>peg?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(peg? c)</code><code>(peg? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of PEG currency.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3426">view source</a></div></div><div class="public anchor" id="var-possible.3F"><h3>possible?</h3><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(possible? c)</code><code>(possible? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given value is a possible currency: can be used to get a currency from a registry, can be used to create currency on its own, or is a currency.</p>
<p>This predicate is semantically wide. If the string or keyword alone can be used to create a valid, ad-hoc currency with automatic scale, and without any properties except identifier, then it will return <code>true</code>. Same for certain numbers: if they cannot be used to create a currency on their own (since there is no ID) but can be used to look one up in a registry (treating a number as an ISO-4217 code), they will be positively tested as possible values for currency creation (if there was a hit).</p>
<p>If <code>registry</code> is not given or is <code>nil</code>, the default one is used.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2990">view source</a></div></div><div class="public anchor" id="var-real.3F"><h3>real?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(real? c)</code><code>(real? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of real currency (has its <code>:kind</code> set to <code>:currency</code> or its descendants.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3395">view source</a></div></div><div class="public anchor" id="var-referenced.3F"><h3>referenced?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(referenced? c)</code><code>(referenced? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of referenced currency.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3450">view source</a></div></div><div class="public anchor" id="var-register"><h3>register</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(register registry currency)</code><code>(register registry currency country-ids)</code><code>(register registry currency update-mode?)</code><code>(register registry currency country-ids update-mode?)</code><code>(register registry currency country-ids localized-properties)</code><code>(register registry currency country-ids localized-properties update-mode?)</code></div><div class="doc"><div class="markdown"><p>Adds a currency and optional, associated country mappings and/or localized properties to the given registry. Returns updated registry.</p>
<p>The optional country-ids argument should be a sequence of keywords (however, if a single keyword is given it will be converted to a single-element sequence) with country codes which should be associated with the given currency.</p>
<p>The optional localized-properties argument should be a map of localized properties of the given currency. See the Data Structures documentation section for more information.</p>
<p>If the update mode is enabled then all of the existing countries associated with the currency are removed and replaced with the provided ones. To simply add new countries, use add-countries. Also note that update mode removes localized properties so new one must be provided.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2731">view source</a></div></div><div class="public anchor" id="var-register.21"><h3>register!</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(register! currency)</code><code>(register! currency country-id-or-update?)</code><code>(register! currency country-id localized-properties update?)</code></div><div class="doc"><div class="markdown"><p>Adds currency and (optional) country to the global registry. Returns updated registry. When the currency is nil, returns current state of the global, shared registry (but not a dynamic registry, even if it is set).</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2834">view source</a></div></div><div class="public anchor" id="var-remove-countries"><h3>remove-countries</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(remove-countries registry country-ids)</code></div><div class="doc"><div class="markdown"><p>Removes countries from the given registry. Also unlinks constrained currencies in proper locations. Returns updated registry.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2636">view source</a></div></div><div class="public anchor" id="var-remove-countries.21"><h3>remove-countries!</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(remove-countries! country-ids)</code></div><div class="doc"><div class="markdown"><p>Removes country (a keyword) or countries (seqable collection of keywords) from the global registry. Automatically removes currency constraints when necessary. Returns updated registry.</p>
<p>If the country-ids is nil, returns current state of a global registry (but not a dynamic registry, even if it is set).</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2872">view source</a></div></div><div class="public anchor" id="var-remove-localized-properties"><h3>remove-localized-properties</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(remove-localized-properties registry currency-id)</code></div><div class="doc"><div class="markdown"><p>Removes localized properties assigned to a currency in a registry. Returns updated registry. Expects currency ID (or equivalent) to be passed as a second argument.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2670">view source</a></div></div><div class="public anchor" id="var-remove-localized-props.21"><h3>remove-localized-props!</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(remove-localized-props! currency)</code></div><div class="doc"><div class="markdown"><p>Removes localized properties of the given currency from the global registry.</p>
<p>If the currency is nil, returns current state of a global registry (but not a dynamic registry, even if it is set).</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2892">view source</a></div></div><div class="public anchor" id="var-remove-traits"><h3>remove-traits</h3><h4 class="added">added in 3.0.0</h4><div class="usage"><code>(remove-traits registry currency-id traits)</code></div><div class="doc"><div class="markdown"><p>Removes traits for the given currency in the registry.</p>
<p>Passing <code>nil</code> or an empty collection is a no-op. Removes the registry entry if it becomes empty.</p>
<p>Throws when the currency cannot be resolved in the registry.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3324">view source</a></div></div><div class="public anchor" id="var-remove-traits.21"><h3>remove-traits!</h3><h4 class="added">added in 3.0.0</h4><div class="usage"><code>(remove-traits! currency-id traits)</code></div><div class="doc"><div class="markdown"><p>Removes traits for the given currency in the global registry. See <code>remove-traits</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3351">view source</a></div></div><div class="public anchor" id="var-same-ids.3F"><h3>same-ids?</h3><h4 class="added">added in 3.0.0</h4><div class="usage"><code>(same-ids? a b)</code><code>(same-ids? a b registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> when two currency representations refer to the same currency ID.</p>
<p>Contract: - symmetric (argument order does not matter), - non-throwing (returns <code>false</code> when IDs cannot be established), - <code>registry=nil</code> or <code>registry=true</code> means: use the default registry, - <code>Currency</code> values are never treated as registry references.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L707">view source</a></div></div><div class="public anchor" id="var-sc"><h3>sc</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(sc c)</code><code>(sc c registry)</code><code>(sc c _locale registry)</code></div><div class="doc"><div class="markdown"><p>Returns currency scale (decimal places) as a number. For currencies without the assigned decimal places it will return <code>nil</code> (the value of auto-scaled). Locale argument is ignored.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L1981">view source</a></div></div><div class="public anchor" id="var-scale"><h3>scale</h3><div class="usage"><code>(scale c)</code><code>(scale c registry)</code><code>(scale c locale registry)</code></div><div class="doc"><div class="markdown"><p>Alias for sc.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L1999">view source</a></div></div><div class="public anchor" id="var-set-default.21"><h3>set-default!</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(set-default! c)</code></div><div class="doc"><div class="markdown"><p>Sets default currency by altering <code>io.randomseed.bankster.currency/*default*</code> dynamic variable.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2966">view source</a></div></div><div class="public anchor" id="var-set-default-registry.21"><h3>set-default-registry!</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(set-default-registry!)</code><code>(set-default-registry! resource-path)</code><code>(set-default-registry! resource-path &amp; more)</code></div><div class="doc"><div class="markdown"><p>Sets default, global registry using a global configuration file and optional user’s configuration file. The highlighted version of a registry will be sourced from the last configuration used.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2948">view source</a></div></div><div class="public anchor" id="var-set-traits"><h3>set-traits</h3><h4 class="added">added in 3.0.0</h4><div class="usage"><code>(set-traits registry currency-id traits)</code></div><div class="doc"><div class="markdown"><p>Sets traits for the given currency in the registry.</p>
<p>Traits are stored as a registry attribute under <code>Registry/:cur-id-&gt;traits</code> (currency ID -&gt; set of keywords). Passing <code>nil</code> or an empty collection removes the traits entry.</p>
<p>Throws when the currency cannot be resolved in the registry.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3266">view source</a></div></div><div class="public anchor" id="var-set-traits.21"><h3>set-traits!</h3><h4 class="added">added in 3.0.0</h4><div class="usage"><code>(set-traits! currency-id traits)</code></div><div class="doc"><div class="markdown"><p>Sets traits for the given currency in the global registry. See <code>set-traits</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3290">view source</a></div></div><div class="public anchor" id="var-set-weight"><h3>set-weight</h3><h4 class="added">added in 3.0.0</h4><div class="usage"><code>(set-weight registry currency-id weight)</code></div><div class="doc"><div class="markdown"><p>Sets currency weight in the given registry and updates all weight-dependent indexes.</p>
<p>Weight is stored as a registry attribute under <code>Registry/:cur-id-&gt;weight</code> (currency ID -&gt; int weight). Setting weight to 0 keeps an explicit 0 entry (presence in the map is meaningful). Use <code>clear-weight</code> to remove the explicit entry (default 0).</p>
<p>Throws when the currency cannot be resolved in the registry.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2123">view source</a></div></div><div class="public anchor" id="var-set-weight.21"><h3>set-weight!</h3><h4 class="added">added in 3.0.0</h4><div class="usage"><code>(set-weight! currency-id weight)</code></div><div class="doc"><div class="markdown"><p>Sets currency weight in the global registry. See <code>set-weight</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2166">view source</a></div></div><div class="public anchor" id="var-special.3F"><h3>special?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(special? c)</code><code>(special? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of special currency.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3462">view source</a></div></div><div class="public anchor" id="var-stable.3F"><h3>stable?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(stable? c)</code><code>(stable? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of stable currency.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3432">view source</a></div></div><div class="public anchor" id="var-staked.3F"><h3>staked?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(staked? c)</code><code>(staked? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of staked currency.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3438">view source</a></div></div><div class="public anchor" id="var-standard.3F"><h3>standard?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(standard? c)</code><code>(standard? c registry)</code></div><div class="doc"><div class="markdown"><p>Alias for iso-strict?</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3152">view source</a></div></div><div class="public anchor" id="var-symbol"><h3>symbol</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(symbol currency)</code><code>(symbol currency locale)</code><code>(symbol currency locale registry)</code></div><div class="doc"><div class="markdown"><p>Returns a currency symbol as a string for the given currency object and locale. If the locale is not given, a default one is used. Uses global registry if a registry is not given.</p>
<p>The following tactic is applied:</p>
<ul>
<li>
<p>The registry field .cur-id-&gt;localized is looked up for the currency ID key. If it’s found then a key with the given locale object (a kind of <code>java.util.Locale</code>) is obtained. If there is no such key, the default one :* is tried (a keyword). The resulting value should be a map of localized properties in which an entry under the key <code>:symbol</code> should exist. Its value will be returned, if found.</p>
</li>
<li>
<p>If the above method failed and the given currency is ISO-standardized then Java methods will be tried to obtain it.</p>
</li>
</ul>
<p>A locale can be expressed as <code>java.util.Locale</code> object or any other object (like a string or a keyword) which can be used to look up the locale.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3637">view source</a></div></div><div class="public anchor" id="var-symbol-native"><h3>symbol-native</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(symbol-native currency)</code><code>(symbol-native currency registry)</code></div><div class="doc"><div class="markdown"><p>Like symbol but for ISO-standardized currencies uses locale assigned to the first country where a currency is the default. When locale is given it is ignored.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3679">view source</a></div></div><div class="public anchor" id="var-test.3F"><h3>test?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(test? c)</code><code>(test? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of test currency.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3468">view source</a></div></div><div class="public anchor" id="var-unregister"><h3>unregister</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(unregister registry currency)</code></div><div class="doc"><div class="markdown"><p>Removes a currency from the given registry. Also removes country mappings and all localized properties associated with a currency. Returns updated registry.</p>
<p>Numeric-ID indexes:</p>
<ul>
<li>removes the currency from <code>:cur-nr-&gt;curs</code> (shared numeric IDs bucket)</li>
<li>updates <code>:cur-nr-&gt;cur</code> to the canonical currency (first in bucket), or removes the numeric entry if bucket becomes empty.</li>
</ul>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2586">view source</a></div></div><div class="public anchor" id="var-unregister.21"><h3>unregister!</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(unregister! currency)</code></div><div class="doc"><div class="markdown"><p>Removes currency from the global registry. Automatically removes country constraints when necessary and localized properties associated with a currency. Returns updated registry.</p>
<p>If the currency is nil, returns current state of a global registry (but not a dynamic registry, even if it is set).</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2846">view source</a></div></div><div class="public anchor" id="var-unset-default.21"><h3>unset-default!</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(unset-default!)</code></div><div class="doc"><div class="markdown"><p>Sets default currency to nil by altering <code>io.randomseed.bankster.currency/*default*</code> dynamic variable.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2973">view source</a></div></div><div class="public anchor" id="var-update"><h3>update</h3><h4 class="added">added in 1.1.0</h4><div class="usage"><code>(update registry currency)</code><code>(update registry currency country-ids)</code><code>(update registry currency country-ids localized-properties-map)</code></div><div class="doc"><div class="markdown"><p>Replaces a currency in the given registry by a new one, preserving localized properties, relation to countries and code if not explicitly given. Returns updated registry. If the currency does not exist in a registry yet, it will be registered.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2804">view source</a></div></div><div class="public anchor" id="var-update.21"><h3>update!</h3><h4 class="added">added in 1.1.0</h4><div class="usage"><code>(update! currency)</code><code>(update! currency country-ids)</code><code>(update! currency country-ids localized-properties-map)</code></div><div class="doc"><div class="markdown"><p>Replaces a currency in the global, shared registry by a new one, preserving localized properties, relation to countries and code if not explicitly given. Returns updated registry. If the currency does not exist in a registry yet, it will be registered.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2821">view source</a></div></div><div class="public anchor" id="var-val-auto-scaled*.3F"><h3>val-auto-scaled*?</h3><h4 class="type">macro</h4><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(val-auto-scaled*? scale)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given scale is equal to auto-scaled.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L88">view source</a></div></div><div class="public anchor" id="var-val-auto-scaled.3F"><h3>val-auto-scaled?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(val-auto-scaled? scale)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given scale is equal to auto-scaled.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L82">view source</a></div></div><div class="public anchor" id="var-virtual.3F"><h3>virtual?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(virtual? c)</code><code>(virtual? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of virtual currency.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3365">view source</a></div></div><div class="public anchor" id="var-weight"><h3>weight</h3><h4 class="added">added in 1.0.2</h4><div class="usage"><code>(weight c)</code><code>(weight c registry)</code><code>(weight c _locale registry)</code></div><div class="doc"><div class="markdown"><p>Returns weight of the given currency (used to resolve conflicts when getting currencies having conflicting currency codes). Returned type should be int but may cast to long.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2092">view source</a></div></div><div class="public anchor" id="var-with"><h3>with</h3><h4 class="type">macro</h4><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(with currency &amp; body)</code></div><div class="doc"><div class="markdown"><p>Sets a default currency in a lexical context of the body.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3844">view source</a></div></div><div class="public anchor" id="var-with-attempt"><h3>with-attempt</h3><h4 class="type">macro</h4><h4 class="added">added in 2.0.0</h4><div class="usage"><code>(with-attempt c registry binding &amp; body)</code></div><div class="doc"><div class="markdown"><p>Evaluates <code>c</code> and tries to coerce it to a <code>Currency</code>.</p>
<p>If coercion succeeds, binds the resulting currency to the given symbol and evaluates <code>body</code>, returning its result. If coercion fails, returns <code>false</code>.</p>
<p>Uses <code>attempt*</code> for coercion (non-throwing).</p>
<p>The binding name can be given either as a symbol or as a single-element vector (mirroring <code>if-some</code> style):</p>
<p>(with-attempt x registry c   (.id c)) (with-attempt x registry <a href="c">c</a>(.id c))</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L1897">view source</a></div></div><div class="public anchor" id="var-with-registry"><h3>with-registry</h3><h4 class="type">macro</h4><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(with-registry registry &amp; body)</code></div><div class="doc"><div class="markdown"><p>Sets a registry in a lexical context of the body to be used instead of a global one in functions which require the registry and it was not passed as an argument. Has the same effect as <code>registry/with</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3851">view source</a></div></div><div class="public anchor" id="var-with-weight"><h3>with-weight</h3><h4 class="added">added in 3.0.0</h4><div class="usage"><code>(with-weight c weight)</code></div><div class="doc"><div class="markdown"><p>Returns a currency with <code>weight</code> set.</p>
<p>Weight is stored in currency metadata and does not participate in <code>=</code> / <code>hash</code> semantics of <code>Currency</code>.</p>
<p>NOTE: Unlike currency constructors (which treat weight as an optional hint), <code>with-weight</code> is an explicit setter: it records the weight even when it is 0.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L2106">view source</a></div></div><div class="public anchor" id="var-wrapped.3F"><h3>wrapped?</h3><h4 class="added">added in 1.0.0</h4><div class="usage"><code>(wrapped? c)</code><code>(wrapped? c registry)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the given currency is a kind of wrapped currency.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.0.0/src/io/randomseed/bankster/currency.clj#L3444">view source</a></div></div></div></body></html>