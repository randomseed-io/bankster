<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>io.randomseed.bankster.serializers.json documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script><link rel="stylesheet" type="text/css" href="css/randomseed.css" /></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Bankster</span> <span class="project-version">2.2.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="10_introduction.html"><div class="inner"><span>Introduction</span></div></a></li><li class="depth-1 "><a href="12_api.html"><div class="inner"><span>Bankster Front API</span></div></a></li><li class="depth-1 "><a href="15_contracts.html"><div class="inner"><span>Bankster Contracts</span></div></a></li><li class="depth-1 "><a href="20_data_structures.html"><div class="inner"><span>Data Structures</span></div></a></li><li class="depth-1 "><a href="30_currency-kinds.html"><div class="inner"><span>Currency kinds</span></div></a></li><li class="depth-1 "><a href="32_currency_traits.html"><div class="inner"><span>Currency traits</span></div></a></li><li class="depth-1 "><a href="50_example_config.html"><div class="inner"><span>Example EDN config</span></div></a></li><li class="depth-1 "><a href="50_serialization.html"><div class="inner"><span>Serialization</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>io</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>randomseed</span></div></div></li><li class="depth-3"><a href="io.randomseed.bankster.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bankster</span></div></a></li><li class="depth-4"><a href="io.randomseed.bankster.api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></a></li><li class="depth-5 branch"><a href="io.randomseed.bankster.api.currency.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>currency</span></div></a></li><li class="depth-5 branch"><a href="io.randomseed.bankster.api.money.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>money</span></div></a></li><li class="depth-5 branch"><a href="io.randomseed.bankster.api.ops.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ops</span></div></a></li><li class="depth-5 branch"><a href="io.randomseed.bankster.api.registry.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>registry</span></div></a></li><li class="depth-5"><a href="io.randomseed.bankster.api.v2.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>v2</span></div></a></li><li class="depth-6 branch"><a href="io.randomseed.bankster.api.v2.currency.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>currency</span></div></a></li><li class="depth-6 branch"><a href="io.randomseed.bankster.api.v2.money.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>money</span></div></a></li><li class="depth-6 branch"><a href="io.randomseed.bankster.api.v2.ops.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ops</span></div></a></li><li class="depth-6"><a href="io.randomseed.bankster.api.v2.registry.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>registry</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.bankster.config.html"><div class="inner"><span class="tree" style="top: -300px;"><span class="top" style="height: 309px;"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.bankster.currency.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>currency</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.bankster.init.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>init</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.bankster.jsr-354.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jsr-354</span></div></a></li><li class="depth-4"><a href="io.randomseed.bankster.money.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>money</span></div></a></li><li class="depth-5 branch"><a href="io.randomseed.bankster.money.inter-ops.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>inter-ops</span></div></a></li><li class="depth-5"><a href="io.randomseed.bankster.money.ops.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ops</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.bankster.registry.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>registry</span></div></a></li><li class="depth-4 branch"><a href="io.randomseed.bankster.scale.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>scale</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>serializers</span></div></div></li><li class="depth-5 branch"><a href="io.randomseed.bankster.serializers.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-5 branch"><a href="io.randomseed.bankster.serializers.edn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>edn</span></div></a></li><li class="depth-5 current"><a href="io.randomseed.bankster.serializers.json.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>json</span></div></a></li><li class="depth-4"><a href="io.randomseed.bankster.util.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-5 branch"><a href="io.randomseed.bankster.util.fs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fs</span></div></a></li><li class="depth-5 branch"><a href="io.randomseed.bankster.util.importer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>importer</span></div></a></li><li class="depth-5"><a href="io.randomseed.bankster.util.map.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>map</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="io.randomseed.bankster.serializers.json.html#var-currency-.3Ejson-full-map"><div class="inner"><span>currency-&gt;json-full-map</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.serializers.json.html#var-currency-.3Ejson-map"><div class="inner"><span>currency-&gt;json-map</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.serializers.json.html#var-currency-.3Ejson-string"><div class="inner"><span>currency-&gt;json-string</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.serializers.json.html#var-json-map-.3Ecurrency"><div class="inner"><span>json-map-&gt;currency</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.serializers.json.html#var-json-map-.3Emoney"><div class="inner"><span>json-map-&gt;money</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.serializers.json.html#var-json-string-.3Ecurrency"><div class="inner"><span>json-string-&gt;currency</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.serializers.json.html#var-json-string-.3Emoney"><div class="inner"><span>json-string-&gt;money</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.serializers.json.html#var-json-text-.3Ecurrency"><div class="inner"><span>json-text-&gt;currency</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.serializers.json.html#var-json-text-.3Emoney"><div class="inner"><span>json-text-&gt;money</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.serializers.json.html#var-JsonDeserializable"><div class="inner"><span>JsonDeserializable</span></div></a></li><li class="depth-2 branch"><a href="io.randomseed.bankster.serializers.json.html#var-from-json-map"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>from-json-map</span></div></a></li><li class="depth-2"><a href="io.randomseed.bankster.serializers.json.html#var-from-json-string"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>from-json-string</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.serializers.json.html#var-JsonSerializable"><div class="inner"><span>JsonSerializable</span></div></a></li><li class="depth-2 branch"><a href="io.randomseed.bankster.serializers.json.html#var-to-json-full-map"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>to-json-full-map</span></div></a></li><li class="depth-2 branch"><a href="io.randomseed.bankster.serializers.json.html#var-to-json-map"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>to-json-map</span></div></a></li><li class="depth-2"><a href="io.randomseed.bankster.serializers.json.html#var-to-json-string"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>to-json-string</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.serializers.json.html#var-money-.3Ejson-full-map"><div class="inner"><span>money-&gt;json-full-map</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.serializers.json.html#var-money-.3Ejson-map"><div class="inner"><span>money-&gt;json-map</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.serializers.json.html#var-money-.3Ejson-string"><div class="inner"><span>money-&gt;json-string</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.serializers.json.html#var-money-codec"><div class="inner"><span>money-codec</span></div></a></li><li class="depth-1"><a href="io.randomseed.bankster.serializers.json.html#var-register-cheshire-codecs.21"><div class="inner"><span>register-cheshire-codecs!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">io.randomseed.bankster.serializers.json</h1><h4 class="added">added in 2.1.0</h4><div class="doc"><div class="markdown"><p>Bankster library, JSON-oriented serialization helpers.</p>
</div></div><div class="public anchor" id="var-currency-.3Ejson-full-map"><h3>currency-&gt;json-full-map</h3><h4 class="added">added in 2.1.0</h4><div class="usage"><code>(currency-&gt;json-full-map c)</code><code>(currency-&gt;json-full-map c opts)</code></div><div class="doc"><div class="markdown"><p>Converts Currency to a full JSON-friendly map with all fields.</p>
<p>Canonical shape: - <code>:id</code>      - currency identifier string (e.g. “PLN” or “crypto/ETH”) - <code>:numeric</code> - ISO numeric code (or -1 if absent) - <code>:scale</code>   - decimal places (or -1 for auto-scaled) - <code>:kind</code>    - kind string (e.g. “FIAT”, “DECENTRALIZED”) - <code>:domain</code>  - domain string (e.g. “ISO-4217”, “CRYPTO”)</p>
<p>Options: - <code>:code-only?</code> - when truthy, namespace is omitted in <code>:id</code> - <code>:keys</code>       - vector of keys to include (filters output)</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.0/src/io/randomseed/bankster/serializers/json.clj#L168">view source</a></div></div><div class="public anchor" id="var-currency-.3Ejson-map"><h3>currency-&gt;json-map</h3><h4 class="added">added in 2.1.0</h4><div class="usage"><code>(currency-&gt;json-map c)</code><code>(currency-&gt;json-map c opts)</code></div><div class="doc"><div class="markdown"><p>Converts Currency to a minimal JSON-friendly map.</p>
<p>Minimal shape (by default): - <code>:id</code> - currency identifier string</p>
<p>When <code>:full?</code> is truthy, delegates to <code>currency-&gt;json-full-map</code>.</p>
<p>Options: - <code>:code-only?</code> - when truthy, namespace is omitted in <code>:id</code> - <code>:full?</code>      - when truthy, returns full map via <code>currency-&gt;json-full-map</code> - <code>:keys</code>       - (only with <code>:full?</code>) vector of keys to include</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.0/src/io/randomseed/bankster/serializers/json.clj#L198">view source</a></div></div><div class="public anchor" id="var-currency-.3Ejson-string"><h3>currency-&gt;json-string</h3><h4 class="added">added in 2.1.0</h4><div class="usage"><code>(currency-&gt;json-string c)</code><code>(currency-&gt;json-string c opts)</code></div><div class="doc"><div class="markdown"><p>Converts Currency to a JSON string identifier.</p>
<p>Options: - <code>:code-only?</code> - when truthy, namespace is omitted: <code>:crypto/ETH</code> → <code>"ETH"</code></p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.0/src/io/randomseed/bankster/serializers/json.clj#L156">view source</a></div></div><div class="public anchor" id="var-json-map-.3Ecurrency"><h3>json-map-&gt;currency</h3><h4 class="added">added in 2.1.0</h4><div class="usage"><code>(json-map-&gt;currency m)</code><code>(json-map-&gt;currency m opts)</code></div><div class="doc"><div class="markdown"><p>Builds Currency from a JSON-friendly map.</p>
<p>Accepts both keyword and string keys. Uses <code>:id</code> for lookup.</p>
<p>Options: - <code>:registry</code> - registry to use for lookup (default: <code>registry/get</code>)</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.0/src/io/randomseed/bankster/serializers/json.clj#L232">view source</a></div></div><div class="public anchor" id="var-json-map-.3Emoney"><h3>json-map-&gt;money</h3><h4 class="added">added in 2.1.0</h4><div class="usage"><code>(json-map-&gt;money m)</code><code>(json-map-&gt;money m opts)</code></div><div class="doc"><div class="markdown"><p>Builds Money from a JSON-friendly map.</p>
<p>Accepts both keyword and string keys.</p>
<p>Options: - <code>:registry</code>      - registry to use for currency lookup (default: <code>registry/get</code>) - <code>:rounding-mode</code> - rounding mode for rescaling (RoundingMode, keyword, or string) - <code>:rescale</code>       - integer scale to use instead of currency’s nominal scale. When provided, the Currency is cloned with this scale before creating Money. This prevents data loss when the registry currency has a smaller scale than the incoming data. Downscaling requires <code>:rounding-mode</code> or <code>scale/*rounding-mode*</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.0/src/io/randomseed/bankster/serializers/json.clj#L351">view source</a></div></div><div class="public anchor" id="var-json-string-.3Ecurrency"><h3>json-string-&gt;currency</h3><h4 class="added">added in 2.1.0</h4><div class="usage"><code>(json-string-&gt;currency s)</code><code>(json-string-&gt;currency s opts)</code></div><div class="doc"><div class="markdown"><p>Builds Currency from a JSON string identifier.</p>
<p>Options: - <code>:registry</code> - registry to use for lookup (default: <code>registry/get</code>)</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.0/src/io/randomseed/bankster/serializers/json.clj#L219">view source</a></div></div><div class="public anchor" id="var-json-string-.3Emoney"><h3>json-string-&gt;money</h3><h4 class="added">added in 2.1.0</h4><div class="usage"><code>(json-string-&gt;money s)</code><code>(json-string-&gt;money s opts)</code></div><div class="doc"><div class="markdown"><p>Builds Money from a JSON string.</p>
<p>Accepts: - amount-first: “12.30 PLN” - currency-first: “PLN 12.30” - no-whitespace: “PLN12.30” (best-effort)</p>
<p>Options: - <code>:registry</code>      - registry to use for currency lookup (default: <code>registry/get</code>) - <code>:rounding-mode</code> - rounding mode for rescaling (RoundingMode, keyword, or string) - <code>:rescale</code>       - integer scale to use instead of currency’s nominal scale. When provided, the Currency is cloned with this scale before creating Money. This prevents data loss when the registry currency has a smaller scale than the incoming data.</p>
<p>For scale-sensitive workflows prefer map representation.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.0/src/io/randomseed/bankster/serializers/json.clj#L529">view source</a></div></div><div class="public anchor" id="var-json-text-.3Ecurrency"><h3>json-text-&gt;currency</h3><h4 class="added">added in 2.1.0</h4><div class="usage"><code>(json-text-&gt;currency s)</code><code>(json-text-&gt;currency s opts)</code></div><div class="doc"><div class="markdown"><p>Parses JSON text and deserializes Currency.</p>
<p>Expects JSON object (map) or JSON string representation.</p>
<p>Options: - <code>:representation</code> - <code>:auto</code> (default), <code>:map</code>, or <code>:string</code> - <code>:parse-fn</code>       - custom parser fn (String -&gt; Clojure value) - <code>:key-fn</code>         - Cheshire key-fn - <code>:bigdecimals?</code>   - when using Cheshire, bind <code>cheshire.parse/*use-bigdecimals?*</code> (default true) - <code>:registry</code>       - registry to use for currency lookup (default: <code>registry/get</code>)</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.0/src/io/randomseed/bankster/serializers/json.clj#L661">view source</a></div></div><div class="public anchor" id="var-json-text-.3Emoney"><h3>json-text-&gt;money</h3><h4 class="added">added in 2.1.0</h4><div class="usage"><code>(json-text-&gt;money s)</code><code>(json-text-&gt;money s opts)</code></div><div class="doc"><div class="markdown"><p>Parses JSON text and deserializes Money.</p>
<p>Expects JSON object (map) or JSON string representation.</p>
<p>Parser selection: - If <code>:parse-fn</code> is provided, it is used to parse the string into a Clojure value. - Otherwise, Cheshire is used when available.</p>
<p>Options: - <code>:representation</code> - <code>:auto</code> (default), <code>:map</code>, or <code>:string</code> - <code>:parse-fn</code>       - custom parser fn (String -&gt; Clojure value) - <code>:key-fn</code>         - Cheshire key-fn (e.g. <code>keyword</code>, <code>identity</code>, nil) - <code>:bigdecimals?</code>   - when using Cheshire, bind <code>cheshire.parse/*use-bigdecimals?*</code> (default true) - <code>:registry</code>       - registry to use for currency lookup (default: <code>registry/get</code>) - <code>:rounding-mode</code>  - rounding mode for rescaling - <code>:rescale</code>        - integer scale override</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.0/src/io/randomseed/bankster/serializers/json.clj#L596">view source</a></div></div><div class="public anchor" id="var-JsonDeserializable"><h3>JsonDeserializable</h3><h4 class="type">protocol</h4><h4 class="added">added in 2.1.0</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Protocol for JSON deserialization of Bankster types.</p>
<p>Options map supports: - <code>:registry</code>       - registry to use for currency lookup (default: <code>registry/get</code>) - <code>:rounding-mode</code>  - rounding mode for rescaling (RoundingMode, keyword, or string) - <code>:rescale</code>        - integer scale to use instead of currency’s nominal scale. When provided, the Currency object is cloned with this scale before creating Money. This prevents data loss when the registry currency has a smaller scale than the incoming data.</p>
</div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-from-json-map"><h3>from-json-map</h3><h4 class="added">added in 2.1.0</h4><div class="usage"><code>(from-json-map type-token m)</code><code>(from-json-map type-token m opts)</code></div><div class="doc"><div class="markdown"><p>Deserializes a value from a JSON-friendly map.</p>
</div></div></div><div class="public anchor" id="var-from-json-string"><h3>from-json-string</h3><h4 class="added">added in 2.1.0</h4><div class="usage"><code>(from-json-string type-token s)</code><code>(from-json-string type-token s opts)</code></div><div class="doc"><div class="markdown"><p>Deserializes a value from a JSON string.</p>
</div></div></div></div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.0/src/io/randomseed/bankster/serializers/json.clj#L57">view source</a></div></div><div class="public anchor" id="var-JsonSerializable"><h3>JsonSerializable</h3><h4 class="type">protocol</h4><h4 class="added">added in 2.1.0</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Protocol for JSON serialization of Bankster types.</p>
<p>Options map supports: - <code>:code-only?</code> - when truthy, namespace is omitted: <code>:crypto/ETH</code> → <code>"ETH"</code> - <code>:full?</code>      - when truthy, delegates to <code>to-json-full-map</code> for full serialization - <code>:keys</code>       - vector of keys to include; supports nested opts via map elements - <code>:rescale</code>    - integer scale to rescale amounts to (requires <code>:rounding-mode</code> for downscaling)</p>
</div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-to-json-full-map"><h3>to-json-full-map</h3><h4 class="added">added in 2.1.0</h4><div class="usage"><code>(to-json-full-map this)</code><code>(to-json-full-map this opts)</code></div><div class="doc"><div class="markdown"><p>Serializes the value to a full JSON-friendly map with all available fields. For Currency: {:id, :numeric, :scale, :kind, :domain} For Money: {:currency {…}, :amount} plus any extended fields.</p>
<p>Options: - <code>:keys</code> - vector of keys to include; nested opts via map elements e.g. {:keys [:amount {:currency {:keys <a href=":id :numeric">:id :numeric</a>}}]}</p>
</div></div></div><div class="public anchor" id="var-to-json-map"><h3>to-json-map</h3><h4 class="added">added in 2.1.0</h4><div class="usage"><code>(to-json-map this)</code><code>(to-json-map this opts)</code></div><div class="doc"><div class="markdown"><p>Serializes the value to a minimal JSON-friendly map. For Money: {:currency “PLN”, :amount “12.30”} For Currency: {:id “PLN”}</p>
</div></div></div><div class="public anchor" id="var-to-json-string"><h3>to-json-string</h3><h4 class="added">added in 2.1.0</h4><div class="usage"><code>(to-json-string this)</code><code>(to-json-string this opts)</code></div><div class="doc"><div class="markdown"><p>Serializes the value to a canonical JSON string.</p>
</div></div></div></div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.0/src/io/randomseed/bankster/serializers/json.clj#L25">view source</a></div></div><div class="public anchor" id="var-money-.3Ejson-full-map"><h3>money-&gt;json-full-map</h3><h4 class="added">added in 2.1.0</h4><div class="usage"><code>(money-&gt;json-full-map money)</code><code>(money-&gt;json-full-map money opts)</code></div><div class="doc"><div class="markdown"><p>Converts Money to a full JSON-friendly map with all fields.</p>
<p>Full shape: - <code>:currency</code> - full currency map (via <code>currency-&gt;json-full-map</code>) - <code>:amount</code>   - amount as string - Plus any extended fields from the Money record</p>
<p>Options: - <code>:code-only?</code>    - when truthy, namespace is omitted in currency <code>:id</code> - <code>:keys</code>          - vector of keys to include; supports nested opts for <code>:currency</code> e.g. {:keys [:amount {:currency {:keys <a href=":id :numeric">:id :numeric</a>}}]} - <code>:rescale</code>       - integer scale to rescale amounts to before serialization - <code>:rounding-mode</code> - rounding mode for rescaling (RoundingMode, keyword, or string)</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.0/src/io/randomseed/bankster/serializers/json.clj#L264">view source</a></div></div><div class="public anchor" id="var-money-.3Ejson-map"><h3>money-&gt;json-map</h3><h4 class="added">added in 2.1.0</h4><div class="usage"><code>(money-&gt;json-map money)</code><code>(money-&gt;json-map money opts)</code></div><div class="doc"><div class="markdown"><p>Converts Money to a minimal JSON-friendly map.</p>
<p>Minimal shape: - <code>:currency</code> - currency identifier string (e.g. “PLN” or “crypto/USDT”) - <code>:amount</code>   - amount as a string (plain BigDecimal, scale preserved)</p>
<p>When <code>:full?</code> is truthy, delegates to <code>money-&gt;json-full-map</code>.</p>
<p>Options: - <code>:code-only?</code>    - when truthy, namespace is omitted: <code>:crypto/ETH</code> → <code>"ETH"</code> - <code>:full?</code>         - when truthy, returns full map via <code>money-&gt;json-full-map</code> - <code>:keys</code>          - (only with <code>:full?</code>) vector of keys to include - <code>:rescale</code>       - integer scale to rescale amounts to before serialization - <code>:rounding-mode</code> - rounding mode for rescaling (RoundingMode, keyword, or string)</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.0/src/io/randomseed/bankster/serializers/json.clj#L322">view source</a></div></div><div class="public anchor" id="var-money-.3Ejson-string"><h3>money-&gt;json-string</h3><h4 class="added">added in 2.1.0</h4><div class="usage"><code>(money-&gt;json-string money)</code><code>(money-&gt;json-string money opts)</code></div><div class="doc"><div class="markdown"><p>Converts Money to a canonical JSON string.</p>
<p>Canonical form: <code>&lt;amount&gt; &lt;currency-id-str&gt;</code> (e.g. “12.30 PLN”). Locale-independent.</p>
<p>Options: - <code>:code-only?</code>    - when truthy, namespace is omitted: <code>:crypto/ETH</code> → <code>"ETH"</code> - <code>:rescale</code>       - integer scale to rescale amounts to before serialization - <code>:rounding-mode</code> - rounding mode for rescaling (RoundingMode, keyword, or string)</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.0/src/io/randomseed/bankster/serializers/json.clj#L398">view source</a></div></div><div class="public anchor" id="var-money-codec"><h3>money-codec</h3><h4 class="added">added in 2.1.0</h4><div class="usage"><code>(money-codec)</code><code>(money-codec {:keys [representation code-only? registry rounding-mode], :as opts})</code></div><div class="doc"><div class="markdown"><p>Returns a representation-aware codec map:</p>
<ul>
<li><code>:encode</code>          - (Money -&gt; json-value) where json-value is map or string</li>
<li><code>:decode</code>          - (json-value -&gt; Money)</li>
<li><code>:representation</code>  - <code>:map</code> or <code>:string</code></li>
</ul>
<p>Options: - <code>:representation</code> - <code>:map</code> (default) or <code>:string</code> - <code>:code-only?</code>     - passed to encoder - <code>:registry</code>       - passed to decoder - <code>:rounding-mode</code>  - passed to decoder</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.0/src/io/randomseed/bankster/serializers/json.clj#L812">view source</a></div></div><div class="public anchor" id="var-register-cheshire-codecs.21"><h3>register-cheshire-codecs!</h3><h4 class="added">added in 2.1.0</h4><div class="usage"><code>(register-cheshire-codecs!)</code><code>(register-cheshire-codecs! {:keys [representation code-only? add-encoder], :as opts})</code></div><div class="doc"><div class="markdown"><p>Registers Cheshire encoders for <code>io.randomseed.bankster.Money</code>.</p>
<p>Notes: - This function does not add any dependencies. If Cheshire is not on the classpath it throws. - Cheshire registration affects encoding; decoding remains explicit via <code>json-map-&gt;money</code> / <code>json-string-&gt;money</code>. - <code>:representation</code> selects whether Money is encoded as an object (<code>:map</code>) or a JSON string (<code>:string</code>).</p>
<p>Options: - <code>:representation</code> - <code>:map</code> (default) or <code>:string</code> - <code>:code-only?</code>     - when truthy, namespace is omitted in currency identifiers - <code>:add-encoder</code>    - custom add-encoder fn (for testing)</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/bankster/blob/2.2.0/src/io/randomseed/bankster/serializers/json.clj#L849">view source</a></div></div></div></body></html>